!function(t){"object"==typeof module&&void 0!==module.exports?module.exports=t:t(FusionCharts)}(function(b){b.register("module",["private","modules.renderer.js-treemap",function(){function y(t){return t?t.replace(/^#*/,"#"):"#E5E5E5"}function c(t,e,i){this.label=t,this.value=parseFloat(e,10),this.colorValue=parseFloat(i,10),this.prev=this.next=void 0,this.meta={}}function h(){this._b=[],this._css=void 0,this.rangeOurEffectApplyFn=function(){},this.statePointerLow={value:void 0,index:void 0},this.statePointerHigh={value:void 0,index:void 0}}var o,n,p,a,z=this.hcLib,r=z.chartAPI,H=(e=Math).max,d=e.round,f=e.tan,D=e.min,l=e.PI,G=z.extend2,t=this.window,W=z.parsexAxisStyles,e=z.Raphael,i=z.graphics,O=i.convertColor,E=i.getLightColor,C=this.raiseEvent,u=z.pluckNumber,s=z.pluck,g=z.each,j=z.BLANKSTRING,Y="rgba(192,192,192,"+(/msie/i.test(t.navigator.userAgent)&&!t.opera?.002:1e-6)+")",v=(t=!z.CREDIT_REGEX.test(t.location.hostname),z.plotEventHandler),U=z.schedular,m=z.preDefStr.DEFAULT;e.addSymbol({backIcon:function(t,e,i){var o=e+--i,n=o-i/2,a=t+i,r=n-i;return["M",t,e-i,"L",t-i,e,t,o,t,n,a,n,a,r,a-i,r,"Z"]},homeIcon:function(t,e,i){var o=2*--i,n=t-i,a=n+o/6,r=e+i,l=a+o/4,h=r-i/2,s=l+o/6,c=h+i/2,g=s+o/4,d=c-i;return["M",t,e-i,"L",n,e,a,e,a,r,l,r,l,h,s,h,s,c,g,c,g,d,g+o/6,d,"Z"]}}),(c.prototype.constructor=c).prototype.getCSSconf=function(){return this.cssConf},c.prototype.getPath=function(){return this.path},c.prototype.setPath=function(){var t=this.getParent();this.path=(t?t.getPath():[]).concat(this)},c.prototype.addChild=function(t){return t instanceof c&&(this.next=this.next||[],[].push.call(this.next,t),t.setParent(this)),this.next},c.prototype.getChildren=function(){return this.next},c.prototype.addChildren=function(t,e){var i=this.getChildren()||(this.next=[]),o=i.length;e||(e=o-1),i.splice(o-1<e?o-1:e<0?0:e,0,t),t.setParent(this)},c.prototype.getDepth=function(){return this.meta.depth},c.prototype.isLeaf=function(t){return(!t||this.getDepth()<t)&&this.next},c.prototype.setParent=function(t){return t instanceof c&&(this.prev=t),this},c.prototype.getSiblingCount=function(t){var e,i=0,o=this;if(this instanceof c){if(e=this.getParent(),t){for(;o;)(o=o.getSibling(t))&&(i+=1);return i}if(e)return e.getChildren().length}},c.prototype.getParent=function(){return this.prev},c.prototype.getLabel=function(){return this.label},c.prototype.getValue=function(){return this.value},c.prototype.setValue=function(t,e){this.value=e?this.value+t:t},c.prototype.getColorValue=function(){return this.colorValue},c.prototype.getSibling=function(t){t=t.toLowerCase();var e,i=this.getParent(),o=this.getLabel();if(i)for(i=i.getChildren(),e=0;e<i.length;e++)if(i[e].getLabel()===o)switch(t){case"left":return i[e-1];case"right":return i[e+1]}},c.prototype.setMeta=function(t,e){this.meta[t]=e},c.prototype.setDepth=function(t){this.meta.depth=t},c.prototype.getMeta=function(t){return t?this.meta[t]:this.meta},(h.prototype.constructor=h).prototype.resetPointers=function(){this.statePointerLow={value:void 0,index:void 0},this.statePointerHigh={value:void 0,index:void 0}},h.prototype.setRangeOutEffect=function(t,e){this._css=t,this.rangeOurEffectApplyFn=e},h.prototype.addInBucket=function(t){var e=this._b,i=t.getColorValue(),o=0,n=e.length-1;if(i){t:{for(var a,r;o<=n;)if((r=(r=e[a=(o+n)/2|0]).getColorValue())<i)o=a+1;else{if(!(i<r)){i=a;break t}n=a-1}i=~n}e.splice(Math.abs(i),0,t)}},h.prototype.moveLowerShadePointer=function(t){var e,i,o=this._b,n=this.statePointerLow,a=!1;if(e=void 0!==(e=n.index)?e:0,t!==(i=void 0!==(i=n.value)?i:Number.NEGATIVE_INFINITY)){if(i<=t){for(;!(t<((i=o[e++])?i.getColorValue():0))&&i;)a=!0,i.rangeOutEffect=this._css,this.rangeOurEffectApplyFn.call(i,this._css);e=a?e-2:e-1}else{for(;!(((i=o[e--])?i.getColorValue():0)<=t)&&i;)i.cssConf=i.cssConf||{},a=!0,delete i.rangeOutEffect,i.cssConf.opacity=1,this.rangeOurEffectApplyFn.call(i,i.cssConf);e=a?e+2:e+1}n.index=e,n.value=t}},h.prototype.moveHigherShadePointer=function(t){var e,i,o=this._b,n=o.length,a=this.statePointerHigh,r=!1;n=void 0!==(i=a.index)?i:n-1;if(t!==(e=void 0!==(e=a.value)?e:Number.POSITIVE_INFINITY)){if(t<e){for(;!((i=(e=o[n--])?e.getColorValue():0)<=t)&&e;)r=!0,e.rangeOutEffect=this._css,this.rangeOurEffectApplyFn.call(e,this._css);n=r?n+2:n+1}else{for(;!(t<(i=(e=o[n++])?e.getColorValue():0))&&e;)e.cssConf=e.cssConf||{},r=!0,delete e.rangeOutEffect,e.cssConf.opacity=1,this.rangeOurEffectApplyFn.call(e,e.cssConf);n=r?n-2:n-1}a.index=n,a.value=t}},r("treemap",{friendlyName:"TreeMap",standaloneInit:!0,hasGradientLegend:!0,creditLabel:t,defaultDatasetType:"treemap",enableMouseOutEvent:!0,applicableDSList:{treemap:!0},_mouseEvtHandler:function(t){var e,i,o,n=(a=t.data).chart,a=a.mouseTracker,r=(v=n.config).canvasLeft,l=v.canvasRight,h=v.canvasBottom,s=v.canvasTop,c=v.datasetOrder||n.components.dataset,g=(v=z.getMouseCoordinate(n.linkedItems.container,t.originalEvent,n)).chartX,d=v.chartY,f=!1,p=c.length,u=a._lastDatasetIndex,v=a._lastPointIndex;if(r<g&&g<l&&s<d&&d<h||n.config.plotOverFlow)for(;p--&&!f;)(e=c[p])&&(i=e._getHoveredPlot&&e._getHoveredPlot(g,d))&&i.hovered&&(f=!0,i.datasetIndex=p,o=a._getMouseEvents(t,i.datasetIndex,i.pointIndex));if((!f||o&&o.fireOut)&&void 0!==u&&(delete a._lastDatasetIndex,delete a._lastPointIndex,c[u]&&c[u]._firePlotEvent&&c[u]._firePlotEvent("mouseout",v,t)),f)for(n=o.events&&o.events.length,a._lastDatasetIndex=i.datasetIndex,v=a._lastPointIndex=i.pointIndex,i=0;i<n;i+=1)e&&e._firePlotEvent&&e._firePlotEvent(o.events[i],v,t)},addData:function(){var t=this._ref.algorithmFactory,e=Array.prototype.slice.call(arguments,0);e.unshift("addData"),e.unshift(this._getCleanValue()),t.realTimeUpdate.apply(this,e)},removeData:function(){var t=this._ref.algorithmFactory,e=Array.prototype.slice.call(arguments,0);e.unshift("deleteData"),e.unshift(this._getCleanValue()),t.realTimeUpdate.apply(this,e)},_createToolBox:function(){var t,e,i,o,n=this.components;t=n.chartMenuBar,e=n.actionBar,t&&t.drawn||e&&e.drawn||(r.mscartesian._createToolBox.call(this),i=(e=(t=n.tb).getAPIInstances(t.ALIGNMENT_HORIZONTAL)).Symbol,e=(n.chartMenuBar||n.actionBar).componentGroups[0],o=new i("backIcon",!1,(t.idCount=t.idCount||0,t.idCount++),t.pId),t=new i("homeIcon",!1,t.idCount++,t.pId),e.addSymbol(t,!0),e.addSymbol(o,!0),n.toolbarBtns={back:o,home:t})},_getCleanValue:function(){var e=this.components.numberFormatter;return function(t){return e.getCleanValue(t)}},_createDatasets:function(){var t=this.components,e=this.jsonData,i=e.dataset,o=(i=e.data||i&&i[0].data,this.defaultDatasetType),n=[];i&&i.length||this.setChartMessage(),g(i,function(t){t.vline||n.push(t)}),e={data:n},this.config.categories=n,t=t.dataset||(t.dataset=[]),i?o&&(i=b.get("component",["dataset",o]))&&(t[0]?(t[0].JSONData=n[0],t[0].configure()):(this._dsInstance=i=new i,t.push(i),i.chart=this,i.init(e))):this.setChartMessage()},init:function(){var t={},e={},i={};this._ref={afAPI:o(t,e,i),algorithmFactory:n(t,e,i),containerManager:a(t,e,i),treeOpt:p},r.guageBase.init.apply(this,arguments)}},r.guageBase,{enablemousetracking:!0}),b.register("component",["dataset","TreeMap",{type:"treemap",pIndex:2,customConfigFn:"_createDatasets",init:function(t){this.JSONData=t.data[0],this.components={},this.conf={},this.graphics={elemStore:{rect:[],label:[],highlight:[],hot:[],polypath:[]}},this.configure()},configure:function(){var t,e=(o=this.chart).components,i=this.conf,o=o.jsonData.chart;i.metaTreeInf={},i.algorithm=(o.algorithm||"squarified").toLowerCase(),i.horizontalPadding=u(o.horizontalpadding,5),i.horizontalPadding=i.horizontalPadding<0?0:i.horizontalPadding,i.verticalPadding=u(o.verticalpadding,5),i.verticalPadding=i.verticalPadding<0?0:i.verticalPadding,i.showParent=u(o.showparent,1),i.showChildLabels=u(o.showchildlabels,0),i.highlightParentsOnHover=u(o.highlightparentsonhover,0),i.defaultParentBGColor=s(o.defaultparentbgcolor,void 0),i.defaultNavigationBarBGColor=s(o.defaultnavigationbarbgcolor,i.defaultParentBGColor),i.showTooltip=u(o.showtooltip,1),i.baseFontSize=u(o.basefontsize,10),i.baseFontSize=i.baseFontSize<1?1:i.baseFontSize,i.labelFontSize=u(o.labelfontsize,void 0),i.labelFontSize=i.labelFontSize<1?1:i.labelFontSize,i.baseFont=s(o.basefont,"Verdana, Sans"),i.labelFont=s(o.labelfont,void 0),i.baseFontColor=s(o.basefontcolor,"#000000").replace(/^#?([a-f0-9]+)/gi,"#$1"),i.labelFontColor=s(o.labelfontcolor,void 0),i.labelFontColor&&(i.labelFontColor=i.labelFontColor.replace(/^#?([a-f0-9]+)/gi,"#$1")),i.labelFontBold=u(o.labelfontbold,0),i.labelFontItalic=u(o.labelfontitalic,0),i.plotBorderThickness=u(o.plotborderthickness,1),i.plotBorderThickness=i.plotBorderThickness<0?0:5<i.plotBorderThickness?5:i.plotBorderThickness,i.plotBorderColor=s(o.plotbordercolor,"#000000").replace(/^#?([a-f0-9]+)/gi,"#$1"),i.tooltipSeparationCharacter=s(o.tooltipsepchar,","),i.plotToolText=s(o.plottooltext,""),i.parentLabelLineHeight=u(o.parentlabellineheight,12),i.parentLabelLineHeight=i.parentLabelLineHeight<0?0:i.parentLabelLineHeight,i.labelGlow=u(o.labelglow,1),i.labelGlowIntensity=u(o.labelglowintensity,100)/100,i.labelGlowIntensity=i.labelGlowIntensity<0?0:1<i.labelGlowIntensity?1:i.labelGlowIntensity,i.labelGlowColor=s(o.labelglowcolor,"#ffffff").replace(/^#?([a-f0-9]+)/gi,"#$1"),i.labelGlowRadius=u(o.labelglowradius,2),i.labelGlowRadius=i.labelGlowRadius<0?0:10<i.labelGlowRadius?10:i.labelGlowRadius,i.btnResetChartTooltext=s(o.btnresetcharttooltext,"Back to Top"),i.btnBackChartTooltext=s(o.btnbackcharttooltext,"Back to Parent"),i.rangeOutBgColor=s(o.rangeoutbgcolor,"#808080").replace(/^#?([a-f0-9]+)/gi,"#$1"),i.rangeOutBgAlpha=u(o.rangeoutbgalpha,100),i.rangeOutBgAlpha=i.rangeOutBgAlpha<1||100<i.rangeOutBgAlpha?100:i.rangeOutBgAlpha,t=u(o.maxdepth),i.maxDepth=void 0!==t?H(t,1):void 0,t=i.showNavigationBar=u(o.shownavigationbar,1),i.slicingMode=s(o.slicingmode,"alternate"),i.navigationBarHeight=u(o.navigationbarheight),i.navigationBarHeightRatio=u(o.navigationbarheightratio),i.navigationBarBorderColor=s(o.navigationbarbordercolor,i.plotBorderColor).replace(/^#?([a-f0-9]+)/gi,"#$1"),i.navigationBarBorderThickness=t?u(o.navigationbarborderthickness,i.plotBorderThickness):0,i.seperatorAngle=u(o.seperatorangle)*(l/180),e.postLegendInitFn({min:0,max:100}),i.isConfigured=!0},_getHoveredPlot:function(t,e){var i,o;for(o=(this.kdTree||[]).length;o--&&(!this.kdTree[o]||!(i=this.kdTree[o].searchTreemap(t,e))););if(i)return{pointIndex:(this.pointObj=i).i||i.index,hovered:!0,pointObj:i}},kdTreeAbs:function(t){function f(t,e,i){return e<=t&&t<=i}function c(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}var e,p=t&&t[0]&&t[0].plotDetails.rect||5,g=Math.max,d=Math.floor,u=Math.sqrt,v=Math.min,b=Math.log,y=Math.exp,m=Math.pow;for(e={},e=(t=t||[]).length;e--;)t[e].r>p&&(p=t[e].r),t[e].x=+t[e].plotDetails.rect.x,t[e].y=+t[e].plotDetails.rect.y;return e={tree:function t(e,i,o,n){var a,r={};if(a=n?"y":"x",0!==e.length)return i===o?r.point=e[i]:1==o-i?e[i][a]>e[o][a]?(r.point=e[i],r.left={point:e[o]}):(r.point=e[o],r.left={point:e[i]}):(a=i+o>>1,n?function t(e,i,o,n){for(var a,r,l,h,s;o<n;){for(600<n-o&&(r=i-o+1,l=b(a=n-o+1),h=.5*y(2*l/3),s=.5*u(l*h*(a-h)/a)*(r-a/2<0?-1:1),l=g(o,d(i-r*h/a+s)),a=v(n,d(i+(a-r)*h/a+s)),t(e,i,l,a)),a=e[i],h=n,c(e,r=o,i),e[n].y>a.y&&c(e,o,n);r<h;){for(c(e,r,h),r++,h--;e[r].y<a.y;)r++;for(;e[h].y>a.y;)h--}e[o].y===a.y?c(e,o,h):c(e,++h,n),h<=i&&(o=h+1),i<=h&&(n=h-1)}}(e,a,i,o):function t(e,i,o,n){for(var a,r,l,h,s;o<n;){for(600<n-o&&(r=i-o+1,l=b(a=n-o+1),h=.5*y(2*l/3),s=.5*u(l*h*(a-h)/a)*(r-a/2<0?-1:1),l=g(o,d(i-r*h/a+s)),a=v(n,d(i+(a-r)*h/a+s)),t(e,i,l,a)),a=e[i],h=n,c(e,r=o,i),e[n].x>a.x&&c(e,o,n);r<h;){for(c(e,r,h),r++,h--;e[r].x<a.x;)r++;for(;e[h].x>a.x;)h--}e[o].x===a.x?c(e,o,h):c(e,++h,n),h<=i&&(o=h+1),i<=h&&(n=h-1)}}(e,a,i,o),r.point=e[a],r.left=t(e,i,a-1,!n),r.right=t(e,a+1,o,!n)),r}(t,0,t.length-1,!1),search:function(o,n){function e(t){var e,i=f(o,t.x1,t.x2)&&f(n,t.y1,t.y2);e=t.point.y,e=u(m(o-t.point.x,2)+m(n-e,2)),r?i?g?t.point.i>r.point.i&&(r=t,g=i,d=e):(r=t,g=i,d=e):!g&&e<d&&(r=t,g=i,d=e):(r=t,g=i,d=e)}function i(t){t&&t.point&&(f(t.point.x,l,h)&&f(t.point.y,s,c)&&e(t),l<=t.point.x&&a(t.left),h>=t.point.x&&a(t.right))}function a(t){t&&t.point&&(f(t.point.x,l,h)&&f(t.point.y,s,c)&&e(t),s<=t.point.y&&i(t.left),c>=t.point.y&&i(t.right))}var r,l=o-p,h=o+p,s=n-p,c=n+p,g=!1,d=0;return i(this.tree),r&&r.point||r},searchTreemap:function(r,l){var h,s=function(t,e){if(t&&t.point){var i=t.point.x,o=i+t.point.plotDetails.rect.width,n=t.point.y,a=n+t.point.plotDetails.rect.height;t.point.x2=o,t.point.y2=a,i<=r&&r<=o&&n<=l&&l<=a&&(i=t.point,h?i.i>h.i&&(h=i):h=i),s(t.left,!e),s(t.right,!e)}};return s(this.tree,!1),h}},t.sort(function(t,e){return t.i-e.i}),e},kdTreePartioning:function(){var t,e=this.chart.config.trackerConfig,i=[];for(t=e.length;t--;)e[t].i=t,void 0===i[e[t].node.meta.depth]&&(i[e[t].node.meta.depth]=[]),i[e[t].node.meta.depth].push(e[t]);for(this.kdTree=[],t=i.length;t--;)this.kdTree[t]=this.kdTreeAbs&&this.kdTreeAbs(i[t])},_rolloverResponseSetter:function(t,e,i){var o=e.getData()||{};e&&(e.attr(o.setRolloverAttr),v.call(e,t,i,"DataPlotRollOver"))},_rolloutResponseSetter:function(t,e,i){var o=e.getData()||{};e&&(e.attr(o.setRolloutAttr),v.call(e,t,i,"DataPlotRollOut"))},_firePlotEvent:function(t,e,i){var o=this,n=o.conf,a=o.chart,r=a.getJobList(),l=a.components.paper;e=o.chart.config.trackerConfig[e||0];var h=a.graphics.trackerGroup,s=e&&e.node&&e.node.plotItem,c=e&&e.evtFns&&e.evtFns.tooltip[0],g=a.components.paper.canvas.style,d=z.toolTip;i=i.originalEvent;var f=o.graphics.singleTracker,p=o.pointObj.plotDetails,u=p&&p.rect,v=(n=n.highlightParentsOnHover,e&&e.node.path),b=(v=v&&v[v.length-2])&&v.rect;if(f||(f=o.graphics.singleTracker=l.rect(h)),s?n&&v?f.attr({x:b.x,y:b.y,width:b.width,height:b.height,stroke:"rgba(255,255,255,0)"}):(p?f.attr({x:u.x||0,y:u.y||0,width:u.width||0,height:u.height||0,stroke:"rgba(255,255,255,0)"}):f.attr({x:0,y:0,width:0,height:0,stroke:"rgba(255,255,255,0)"}),f.toFront()):(s=e&&e.node.dirtyNode.plotItem,p={},u={}),s)switch(t){case"mouseover":e.evtFns.hover[0](f),c&&(d.setStyle(l),d.setPosition(i),d.draw(c,l)),g.cursor="pointer";break;case"mouseout":f.attr({x:0,y:0,width:0,height:0,stroke:"#ffffff","stroke-width":"0px"}),d.hide(),g.cursor=m,f.toFront(),o._rolloutResponseSetter(a,s,i);break;case"click":e&&e.evtFns&&e.evtFns.click&&e.evtFns.click[0](),c&&(d.setStyle(l),d.setPosition(i),d.draw(c,l)),r.trackerDrawID.push(U.addJob(function(){o.kdTreePartioning()},z.priorityList.tracker));break;case"mousemove":c&&(d.setPosition(i),d.draw(c,l))}},draw:function(){var h,t,r,g,d,f,p,s,i,e,o,n,a,l,c,u=this,v=u.conf,b=u.chart,y=b.config.trackerConfig,m=b.getJobList(),x=b.config,w=b.components,k=x.canvasLeft,P=x.canvasRight,C=x.canvasBottom,I=x.canvasTop,T=w.paper,S=b.jsonData.chart,A=b.graphics,R=A.trackerGroup,F=(x=v.metaTreeInf,u.graphics.elemStore),V={},B=["fontFamily","fontSize","fontWeight","fontStyle"],_={},L=(w=w.gradientLegend,(E=b._ref).afAPI.visibilityController),H=(O=b.get("config","animationObj")).duration||0,D=O.dummyObj,M=O.animObj,N=O.animType,O=E.containerManager,E=E.algorithmFactory;for(y&&(y.length=0),e=W({},{},S,{fontFamily:"Verdana,sans",fontSize:"10px"}),y=0,S=B.length;y<S;y++)(o=B[y])in e&&(_[o]=e[o]);for(t in F){for(y=0,S=(B=F[t]).length;y<S;y++)(e=B[y])&&e.remove&&e.remove();B.length=0}O.remove(),h=A.datasetGroup=A.datasetGroup||T.group("dataset"),t=A.datalabelsGroup=(A.datalabelsGroup||T.group("datalabels").insertAfter(h)).css(_),r=A.lineHot=A.lineHot||T.group("line-hot",R),g=A.labelHighlight=A.labelHighlight||T.group("labelhighlight",t),d=A.floatLabel=A.floatLabel||T.group("labelfloat",t).insertAfter(g),v.colorRange=w.colorRange,x.effectiveWidth=P-k,x.effectiveHeight=C-I,x.startX=k,x.startY=I,x.effectiveWidth,x.effectiveHeight,f=x.effectiveWidth/2,p=x.effectiveHeight/2,V.drawPolyPath=function(t,e){var i,o;return(i=(V.graphicPool(!1,"polyPathItem")||(o=T.path(h))).attr({path:t._path}).animateWith(D,M,{path:t.path},H,N)).css(e),o&&F.polypath.push(o),i},V.drawRect=function(t,e,i,o){var n,a,r={},l={};for(n in t)t[n]<0&&(t[n]=0,l.visibility="hidden");return G(r,t),r.x=f,r.y=p,r.height=0,r.width=0,(s=V.graphicPool(!1,"plotItem")||(a=T.rect(h))).attr(i&&(i.x||i.y)&&i||r),s.attr(o),s.animateWith(D,M,t,H,N,L.controlPostAnimVisibility),s.css(e).toFront(),s.css(l),a&&F.rect.push(a),s},V.drawText=function(t,e,i,o,n){var a,r,l={},h=V.graphicPool(!1,"labelItem")||(a=T.text(d)),s=V.graphicPool(!1,"highlightItem")||(r=T.text(g)),c=i.textAttrs;return i=i.highlightAttrs,G(l,c),delete l.fill,l["stroke-linejoin"]="round",h.attr({x:o.x||f,y:o.y||p,fill:"#000000"}).css(c),h.attr(n),t=e.x<0||e.y<0?j:t,h.animateWith(D,M,{text:t,x:e.x,y:e.y},H,N),s.attr({text:t,x:o.x||f,y:o.y||p,stroke:v.labelGlow?"#ffffff":Y}).css(l).css(i),s.attr(n),s.animateWith(D,M,{x:e.x,y:e.y},H,N),F.label.push(a),F.highlight.push(r),{label:h,highlightMask:s}},V.drawHot=function(t,e){var i;i=t.plotItem||{};var o,n,a=t.rect;for(n in a)a[n]<0&&(a[n]=0);for(o in i=i.tracker=T.rect(r).attr(a).attr({cursor:"pointer",fill:"rgba(255, 255, 255, 0)",stroke:"none"}),e)a=e[o],i[o].apply(i,a);return F.hot.push(i),i},V.disposeItems=function(t,e){var i,o,n,a=e||"plotItem labelItem hotItem highlightItem polyPathItem pathlabelItem pathhighlightItem stackedpolyPathItem stackedpathlabelItem stackedpathhighlightItem".split(" ");for(i=0;i<a.length;i+=1)(o=t[n=a[i]])&&V.graphicPool(!0,n,o,t.rect),o&&o.hide(),t[n]=void 0},V.disposeChild=(a=function(){return n.disposeItems},l=function(t,e){var i,o;for(a(t),i=0;i<(t.getChildren()||[]).length;i++)o=t.getChildren(),i=l(o[i],i);return e},function(t){var e=t.getParent();n||(n=this,a=a()),e?n.disposeChild(e):l(t,0)}),V.graphicPool=(c={},function(t,e,i){var o=c[e];if(o||(o=c[e]=[]),"hotItem"!==e&&"pathhotItem"!==e||i.remove(),t)o.push(i);else if(t=o.splice(0,1)[0])return t.show(),t}),V.disposeComplimentary=function(t){var e,i;e=t.getParent();var o=t.getSiblingCount("left");e&&(e=(i=e.getChildren()).splice(o,1)[0],this.disposeChild(t),i.splice(o,0,e)),this.removeLayers()},V.removeLayers=function(){var t,e,i,o;for(o=(i=F.hot).length,t=0;t<o;t++)(e=i[t])&&e.remove();i.length=0},E.init(v.algorithm,!0,v.maxDepth),b=E.plotOnCanvas(u.JSONData,void 0,b._getCleanValue()),O.init(u,x,V,void 0,b),O.draw(),i=E.applyShadeFiltering({fill:v.rangeOutBgColor,opacity:.01*v.rangeOutBgAlpha},function(t){this.plotItem&&this.plotItem.css(t)}),w&&w.enabled&&(w.resetLegend(),w.clearListeners()),w.notifyWhenUpdate(function(t,e){i.call(this,{start:t,end:e})},this),v.isConfigured=!1,m.trackerDrawID.push(U.addJob(function(){u.kdTreePartioning()},z.priorityList.tracker))}}]),o=function(w,t,k){function e(t,e,i){this.node=t,this.bucket=e?new h:void 0,this.cleansingFn=i}var n,b,P,i,a,r,l,o;return e.prototype.get=function(){var l=this.order,h=this.bucket,s=this.cleansingFn;return function t(e,i){var o,n,a,r;if(n=["label","value","data","svalue"],e)for(r in o=new c(e.label,s(e.value),s(e.svalue)),0===(a=e.data||[]).length&&h&&h.addInBucket(o),o.setDepth(i),e)-1===n.indexOf(r)&&o.setMeta(r,e[r]);for(l&&(a=l(a)),n=0;n<a.length;n++)r=t(r=a[n],i+1),o.addChild(r);return o}(this.node,0)},e.prototype.getBucket=function(){return this.bucket},e.prototype.getMaxDepth=function(){return b},n=function(t,e){function i(t){this.iterAPI=t}var n=e&&e.exception;return(i.prototype.constructor=i).prototype.initWith=function(t){return this.iterAPI(t)},{df:new i(function(t){var e=t,i=[],o=!1;return i.push(e),{next:function(t){var e;if(!o)return e=i.shift(),n&&e===n&&!(e=i.shift())?void(o=!0):(((t=void 0!==t&&e.getDepth()>=t?[]:e.getChildren())&&t.length||0)&&[].unshift.apply(i,t),0===i.length&&(o=!0),e)},reset:function(){o=!1,e=t,i.length=0,i.push(e)}}}).initWith(t),bf:new i(function(t){var e=t,i=[],o=[],n=!1;return i.push(e),o.push(e),{next:function(){var t,e;if(!n)return((t=(e=i.shift()).getChildren())&&t.length||0)&&[].push.apply(i,t),0===i.length&&(n=!0),e},nextBatch:function(){var t;if(!n)return((t=(t=o.shift()).getChildren())&&t.length||0)&&[].push.apply(o,t),0===i.length&&(n=!0),t},reset:function(){n=!1,e=t,i.length=0,i.push(e)}}}).initWith(t)}},i=function(){function i(){this.con={}}var o={};return(i.prototype.constructor=i).prototype.get=function(t){return this.con[t]},i.prototype.set=function(t,e){this.con[t]=e},i.prototype.delete=function(t){return delete this.con[t]},{getInstance:function(t){var e;return(e=o[t])?e:o[t]=new i}}}(),l=!(r=[]),o={visibility:"visible"},t={controlPreAnimVisibility:function(t,e){var i,o;if(t){for(o=t;o=o.getParent();)i=o;for(i=(i=n(i,{exception:t})).df;o=i.next();)(o.overAttr||(o.overAttr={})).visibility="hidden",r.push(o);return a=e||t.getParent(),l=!1,r}},displayAll:function(t){var e;if(t){for(t=(t=n(t.getParent()||t)).df;e=t.next();)(e=e.overAttr||(e.overAttr={})).visibility="visible";a=void 0,r.length=0,l=!1}},controlPostAnimVisibility:function(){var t,e;if(!l&&(l=!0,a)){for(e=(e=n(a)).df;t=e.next(b);)(t=t.dirtyNode)&&(t&&t.plotItem.attr(o),(t=t&&t.textItem)&&t.label&&t.label.attr(o),t&&t.label&&t.highlightMask.attr(o));a=void 0,r.length=0}}},w.AbstractTreeMaker=e,w.iterator=n,w.initConfigurationForlabel=function(t,c,g){var d=t.x,f=t.y,p=c/2,u=g.showParent?0:1,v=g.showChildLabels;return function(t,e,i,o){i=!1;var n,a={x:void 0,y:void 0,width:void 0,height:void 0},r={},l=0,h={},s={};h=t.meta;if(t)return t.isLeaf(b)||(i=!0),r.label=t.getLabel(),a.width=e.width-2*d,a.x=e.x+e.width/2,t=e.height-2*f,!i&&t<c&&(a.height=-1),!o&&i?(a.height=v?a.height?a.height:e.height-2*f:-1,a.y=e.y+e.height/2):u?(a.y=-1,c=f=0,n="hidden"):(a.height=a.height?a.height:c,a.y=e.y+f+p),l+=2*f,l+=c,r.rectShiftY=l,r.textRect=a,g.labelGlow?(s["stroke-width"]=g.labelGlowRadius,s.opacity=g.labelGlowIntensity,s.stroke=g.labelGlowColor,s.visibility="hidden"===n?"hidden":"visible"):s.visibility="hidden",{conf:r,attr:h={fill:h&&h.fontcolor&&y(h.fontcolor)||g.labelFontColor||g.baseFontColor,visibility:n},highlight:s}}},w.context=i,w.mapColorManager=function(l,h,t){var s=y(t?l.defaultNavigationBarBGColor:l.defaultParentBGColor);return function(t,e,i){e={};var o,n=t.cssConf,a=(a=t.meta).fillcolor?y(a.fillcolor):void 0,r=t.getParent();return o=t.getColorValue(),l.isLegendEnabled=!0,o=l.isLegendEnabled&&o==o?h.getColorByValue(o)&&"#"+h.getColorByValue(o)||y(h.rangeOutsideColor):void 0,t.isLeaf(b)?e.fill=a||o||s:(t=(t=(r||t).cssConf)&&t.fill,e.fill=a||o||t),e.stroke=i?l.navigationBarBorderColor:l.plotBorderColor,e.strokeWidth=i?l.navigationBarBorderThickness:l.plotBorderThickness,e["stroke-dasharray"]="none",!i&&n&&"--"===n["stroke-dasharray"]&&(e["stroke-dasharray"]=n["stroke-dasharray"],e.strokeWidth=n.strokeWidth),e}},w.abstractEventRegisterer=function(h,t,e,s){function c(t){var e,i={};for(e in o)i[o[e]]=t[e];return i}var g,d,f,p=t.chart,i=p.components,u=i.dataset[0],v=i.toolbarBtns,b=p.chartInstance,y=t.conf,m=i.gradientLegend,a=h.drawTree,x=s.disposeChild,r=p.getJobList(),l=arguments,o={colorValue:"svalue",label:"name",value:"value",rect:"metrics"};return d=w.context.getInstance("ClickedState"),p._intSR={},p._intSR.backToParent=g=function(t){var e=this,i=e,o=i&&e.getParent(),n=w.context.getInstance("ClickedState").get("VisibileRoot")||{};p.config.trackerConfig.length=0,r.trackerDrawID.push(U.addJob(function(){u.kdTreePartioning()},z.priorityList.tracker)),t?C("beforedrillup",{node:e,withoutHead:!y.showParent},b,void 0,function(){o&&(n.state="drillup",n.node=[{virginNode:w.getVisibleRoot()},o],x(i),a.apply(o,l)),C("drillup",{node:e,withoutHead:!y.showParent,drillUp:g,drillUpToTop:f},b),e=e&&e.getParent()},function(){C("drillupcancelled",{node:e,withoutHead:!y.showParent},b)}):(o&&(n.state="drillup",n.node=[{virginNode:w.getVisibleRoot()},o],x(i),a.apply(o,l)),e=e&&e.getParent())},p._intSR.resetTree=f=function(t){var e,i=this,o=i&&i.getParent(),n=w.context.getInstance("ClickedState").get("VisibileRoot")||{};for(p.config.trackerConfig.length=0,r.trackerDrawID.push(U.addJob(u.kdTreePartioning,z.priorityList.tracker));o;)o=(e=o).getParent();t?C("beforedrillup",{node:i,withoutHead:!y.showParent},b,void 0,function(){e&&(n.state="drillup",n.node=[{virginNode:w.getVisibleRoot()},e],x(e),a.apply(e,l),C("drillup",{node:i,sender:p.fusionCharts,withoutHead:!y.showParent,drillUp:g,drillUpToTop:f},b))},function(){C("drillupcancelled",{node:i,withoutHead:!y.showParent},b)}):e&&(n.state="drillup",n.node=[{virginNode:w.getVisibleRoot()},e],x(e),a.apply(e,l))},{click:function(t,e){var i,o,n,a=t.virginNode,r=u.graphics.singleTracker,l=u.kdTree;if(C("dataplotclick",c(t.virginNode),b),o=a.getParent()){if(a===e)n=o,l&&(l.length=0),p.config.trackerConfig.length=0,i="drillup";else{if(a.next)n=a,l&&(l.length=0);else if(e===(n=o))return void(i=void 0);p.config.trackerConfig.length=0,i="drilldown"}m&&m.enabled&&m.resetLegend(),h.applyShadeFiltering.reset(),i&&C("before"+i,{node:n,withoutHead:!y.showParent},b,void 0,function(){d.set("VisibileRoot",{node:t,state:i}),x.call(s,n),P=n,k.draw(),C(i,{node:n,withoutHead:!y.showParent,drillUp:g,drillUpToTop:f},b)},function(){C(i+"cancelled",{node:n,withoutHead:!y.showParent},b)}),v.back&&v.back.attachEventHandlers({click:g.bind(n)}),v.home&&v.home.attachEventHandlers({click:f.bind(n)}),r&&r.attr({x:0,y:0,width:0,height:0,stroke:"rgba(255,255,255,0)"})}},mouseover:function(t){var e=c(t.virginNode);C("dataplotrollover",e,b,void 0,void 0,function(){C("dataplotrollovercancelled",e,b)})},mouseout:function(t){var e=c(t.virginNode),i=u.graphics.singleTracker;i&&i.attr({x:0,y:0,width:0,height:0,stroke:"rgba(255,255,255,0)"}),C("dataplotrollout",c(t.virginNode),b,void 0,void 0,function(){C("dataplotrolloutcancelled",e,b)})}}},w.setMaxDepth=function(t){return b=t},w.getVisibleRoot=function(){return P},w.setVisibleRoot=function(t){P=t},w.visibilityController=t,w},n=function(c,i){function o(){t.apply(this,arguments)}function n(t,e,i){return t=(s=new o(t,d,e)).get(),!1!==i&&(g=t),c.setVisibleRoot(t),t}function a(){var t,e=l[h];i.realTimeUpdate=r.apply(this,arguments),(t=Array.prototype.slice.call(arguments,0)).unshift(e),e.drawTree.apply(c.getVisibleRoot(),t)}function r(){var o,n,a=l[h];return(n=Array.prototype.slice.call(arguments,0)).unshift(a),o=n.slice(-1)[0],function(){var t=Array.prototype.slice.call(arguments,0),e=t.shift(),i=t.shift();p(g,function(t){a.drawTree.apply(t||g,n)},o,e)[i].apply(this,t)}}var l,h,s,g,d,f,N,t=c.AbstractTreeMaker;return l={sliceanddice:{areaBaseCalculator:function(c,g){return function(t,e,i){var o,n,a,r,l,h={},s=o=0;if(t)return i&&(o=i.textMargin||o),s=o,i=t.getParent(),o=t.getSibling("left"),i?(n=i.getValue(),a=(l=i.rect).height-2*g-s,r=l.width-2*c,h.effectiveRect={height:a,width:r,x:l.x+c,y:l.y+g+s},h.effectiveArea=a*r,h.ratio=t.getValue()/n,o?e.call(t,h,o,i):(h.lastIsParent=!0,e.call(t,h,i))):null}},applyShadeFiltering:function(e,t,i){return e.setRangeOutEffect(t,i),this.applyShadeFiltering.reset=function(){e.resetPointers()},function(t){e.moveLowerShadePointer(t.start),e.moveHigherShadePointer(t.end)}},alternateModeManager:function(){return function(t,e){var i,o,n,a,r,l=t.effectiveArea*t.ratio;o=t.effectiveRect;var h=e.rect;return t.lastIsParent?(a=o.x,r=o.y,i=o.height,o=o.width,n=this.isDirectionVertical=!0):(i=o.height+o.y-(h.height+h.y),o=o.width+o.x-(h.width+h.x),n=this.isDirectionVertical=!e.isDirectionVertical),n?(o=l/i,a=void 0!==a?a:h.x,r=void 0!==r?r:h.y+h.height):(i=l/o,a=void 0!==a?a:h.x+h.width,r=void 0!==r?r:h.y),{height:i,width:o,x:a,y:r}}},horizontalVerticalManager:function(t){var s="vertical"===t;return function(t,e,i){var o,n,a,r=t.effectiveArea*t.ratio,l=t.effectiveRect,h=e.rect;return t.lastIsParent?(n=l.x,a=l.y,t=l.height,o=l.width,e=this.isDirectionVertical=!e.isDirectionVertical):(t=l.height+l.y-(h.height+h.y),o=l.width+l.x-(h.width+h.x),e=this.isDirectionVertical=!i.isDirectionVertical),(e=s?e:!e)?(0===t&&(t=l.height,n=void 0!==n?n:h.x+h.width,a=void 0!==a?a:h.y),o=r/t,n=void 0!==n?n:h.x,a=void 0!==a?a:h.y+h.height):(0===o&&(o=l.width,n=void 0!==n?n:h.x,a=void 0!==a?a:h.y+h.height),t=r/o,n=void 0!==n?n:h.x+h.width,a=void 0!==a?a:h.y),{height:t,width:o,x:n,y:a}}},drawTree:function(t,e,i,y){var m,x,o,n,a=e.chart,r=a.components,w=(l=a.config||(a.config={})).trackerConfig||(l.trackerConfig=[]),k=r.numberFormatter,P=(r=r.toolbarBtns,y.drawRect),C=y.drawText,I=y.drawHot,l=i.horizontalPadding,h=i.verticalPadding,T=e.chart.linkedItems.smartLabel,S=(n=c.iterator)(this).df,A=t.areaBaseCalculator(l,h),R=e.conf,F=R.highlightParentsOnHover,V=c.context,B=(l=c.visibilityController,c.mapColorManager(R,e.conf.colorRange)),_=(h=c.abstractEventRegisterer.apply(c,arguments)).click,L=h.mouseover,H=h.mouseout,D=t["alternate"===(h=R.slicingMode)?"alternateModeManager":"horizontalVerticalManager"](h);h=a._intSR;for((o=(n=V.getInstance("ClickedState").get("VisibileRoot")||{}).node)&&n.state&&("drillup"===n.state.toLowerCase()?o instanceof Array?l.controlPreAnimVisibility(o[0].virginNode,o[1]):l.controlPreAnimVisibility(o.virginNode):l.displayAll(n.node.virginNode)),x=c.initConfigurationForlabel({x:5,y:5},R.parentLabelLineHeight,R),l=m=S.next(N=c.setMaxDepth(this.getDepth()+f));l.getParent();)l=l.getParent();R.showNavigationBar?(r.home.hide(),r.back.hide()):l!=m?(r.home.show(),r.back.show()):(r.home.hide(),r.back.hide()),T.useEllipsesOnOverflow(a.config.useEllipsesWhenOverflow),T.setStyle(R._setStyle={fontSize:(R.labelFontSize||R.baseFontSize)+"px",fontFamily:R.labelFont||R.baseFont,lineHeight:1.2*(R.labelFontSize||R.baseFontSize)+"px"}),a=h.backToParent,l=h.resetTree,r.back&&r.back.attachEventHandlers({click:a.bind(m)}),r.home&&r.home.attachEventHandlers({click:l.bind(m)}),function t(e,i){var o,n,a,r,l,h,s,c;h={};var g,d,f={},p={};s={};var u,v,b="";e&&(u=k.yAxis(e.getValue()),v=k.sYAxis(e.getColorValue()),e.setPath(),o=e.rect||{},n=e.textRect||{},a=e.rect={},s=e.textRect={},a.width=i.width,a.height=i.height,a.x=i.x,a.y=i.y,s=B(e),(d=e.plotItem)&&y.graphicPool(!0,"plotItem",d,o),d=e.plotItem=P(a,s,o,e.overAttr),e.cssConf=s,r=(c=x(e,a)).conf,h.textMargin=r.rectShiftY,s=e.textRect=r.textRect,g=T.getSmartText(r.label,s.width,s.height).text,e.plotItem=d,(r=e.labelItem)?(l=e.highlightItem,y.graphicPool(!0,"labelItem",r,o),y.graphicPool(!0,"highlightItem",l,o)):n=n||{},n=C(g,s,{textAttrs:c.attr,highlightAttrs:c.highlight},n,e.overAttr),e.labelItem=n.label,e.highlightItem=n.highlightMask,f.virginNode=e,f.plotItem=d,f.textItem=n,f.virginNode.dirtyNode=f,e.getColorValue()&&(b=R.tooltipSeparationCharacter+v),f.toolText=R.showTooltip?z.parseTooltext(R.plotToolText,[1,2,3,119,122],{label:e.getLabel(),formattedValue:u,formattedsValue:v},{value:e.getValue(),svalue:e.getColorValue()})||e.getLabel()+R.tooltipSeparationCharacter+u+b:j,f.rect=a,p.hover=[function(t){var e,i,o;o=V.getInstance("hover"),i=this.virginNode,e=F&&!i.next?(e=i.getParent())?e:i:this.virginNode,o.set("element",e),o=O(E(e.cssConf.fill,80),60),t.attr({fill:o}),L(this)}.bind(f),function(){var t,e;t=V.getInstance("hover").get("element"),e=O(t.cssConf.fill||"#fff",0),t.plotItem.tracker.attr({fill:e}),H(this)}.bind(f)],p.tooltip=[f.toolText],p.click=[function(){_(this,m)}.bind(f)],(a=e.hotItem)&&y.graphicPool(!0,"hotItem",a,o),w.push({node:e,key:"hotItem",plotDetails:f,evtFns:p,callback:I}),t(o=S.next(N),h=A(o,D,h)))}(m,i)}},squarified:{orderNodes:function(){return this.sort(function(t,e){return parseFloat(t.value,10)<parseFloat(e.value,10)?1:-1})},areaBaseCalculator:function(h,s){return function(t,e,i){var o,n,a,r={},l=o=0;if(t&&0!==t.length)return i&&(o=i.textMargin||o),l=o,(t=(n=t[0]).getParent())?(i=(a=t.rect).height-2*s-l,o=a.width-2*h,r.effectiveRect={height:i,width:o,x:a.x+h,y:a.y+s+l},r.effectiveArea=i*o,e.call(n,r,t)):null}},layoutManager:function(){function t(t,e){this.totalValue=e,this._rHeight=t.height,this._rWidth=t.width,this._rx=t.x,this._ry=t.y,this._rTotalArea=t.height*t.width,this.nodes=[],this._prevAR=void 0,this._rHeight<this._rWidth&&(this._hSegmented=!0)}return(t.prototype.constructor=t).prototype.addNode=function(t){var e,i,o,n,a,r,l,h,s,c,g,d=this._rTotalArea,f=this._hSegmented,p=this._rx,u=this._ry,v=0;for(this.nodes.push(t),o=0,i=this.nodes.length;o<i;o++)v+=parseFloat(this.nodes[o].getValue(),10);for(e=v/this.totalValue*d,f?(d=this._rHeight,h=p+(i=e/d),s=u,c=this._rHeight,g=this._rWidth-i):(i=this._rWidth,h=p,s=u+(d=e/i),c=this._rHeight-d,g=this._rWidth),o=0,n=this.nodes.length;o<n;o++)r=(a=(t=this.nodes[o]).getValue())/v*e,t.hRect=t.rect||{},t._hRect=t._rect||{},a=t.rect={},f?(a.width=l=i,a.height=l=r/l,a.x=p,a.y=u,u+=l):(a.height=l=d,a.width=l=r/l,a.x=p,a.y=u,p+=l),r=H(a.height,a.width),a=D(a.height,a.width),t.aspectRatio=r/a;if(1<this.nodes.length){if(this.prevAR<t.aspectRatio){for(this.nodes.pop().rect={},o=0,i=this.nodes.length;o<i;o++)this.nodes[o].rect=1===i&&this.nodes[o].firstPassed?this.nodes[o]._hRect:this.nodes[o].hRect,f=this.nodes[o]._rect={},p=this.nodes[o].rect,f.width=p.width,f.height=p.height,f.x=p.x,f.y=p.y;return!1}}else t&&(f=t._rect={},p=t.rect,f.width=p.width,f.height=p.height,f.x=p.x,f.y=p.y,t.firstPassed=!0);return this.prevAR=t.aspectRatio,this.height=d,this.width=i,this.getNextLogicalDivision=function(){return{height:c,width:g,x:h,y:s}},t},{RowLayout:t}}(),applyShadeFiltering:function(e,t,i){return e.setRangeOutEffect(t,i),this.applyShadeFiltering.reset=function(){e.resetPointers()},function(t){e.moveLowerShadePointer(t.start),e.moveHigherShadePointer(t.end)}},drawTree:function(t,e,i,x){var w,k,o,n,a=e.chart,P=(r=a.config||(a.config={})).trackerConfig||(r.trackerConfig=[]),C=(r=a.components).numberFormatter,r=r.toolbarBtns,I=t.areaBaseCalculator(i.horizontalPadding,i.verticalPadding),T=t.layoutManager.RowLayout,S=e.chart.linkedItems.smartLabel,A=x.drawRect,R=x.drawText,F=x.drawHot,l=(h=c.iterator)(this).bf,V=e.conf,B=V.highlightParentsOnHover,_=c.context,L=c.mapColorManager(V,e.conf.colorRange),H=(h=c.abstractEventRegisterer.apply(c,arguments)).click,D=h.mouseover,M=h.mouseout,h=a._intSR,s=c.visibilityController;for((n=(o=_.getInstance("ClickedState").get("VisibileRoot")||{}).node)&&o.state&&("drillup"===o.state.toLowerCase()?n instanceof Array?s.controlPreAnimVisibility(n[0].virginNode,n[1]):s.controlPreAnimVisibility(n.virginNode):s.displayAll(o.node.virginNode)),k=c.initConfigurationForlabel({x:5,y:5},V.parentLabelLineHeight,V),l=w=l.next(N=c.setMaxDepth(this.getDepth()+f));l.getParent();)l=l.getParent();V.showNavigationBar?(r.home.hide(),r.back.hide()):l!=w?(r.home.show(),r.back.show()):(r.home.hide(),r.back.hide()),S.useEllipsesOnOverflow(a.config.useEllipsesWhenOverflow),S.setStyle(V._setStyle={fontSize:(V.labelFontSize||V.baseFontSize)+"px",fontFamily:V.labelFont||V.baseFont,lineHeight:1.2*(V.labelFontSize||V.baseFontSize)+"px"}),a=h.backToParent,h=h.resetTree,r.back&&r.back.attachEventHandlers({click:a.bind(w)}),r.home&&r.home.attachEventHandlers({click:h.bind(w)}),function t(e,i){var o,n,a,r,l,h,s,c,g,d,f,p,u={},v=0;s={},c={},g={},l={};var b,y,m="";if(e&&(b=C.yAxis(e.getValue()),y=C.sYAxis(e.getColorValue()),e.setPath(),(o=e.__initRect)&&(u.x=o.x,u.y=o.y,u.width=o.width,u.height=o.height),r=e.textRect||{},o=e.rect=e.__initRect={},l=e.textRect={},o.width=i.width,o.height=i.height,o.x=i.x,o.y=i.y,l=L(e),(d=e.plotItem)&&x.graphicPool(!0,"plotItem",d,u),d=e.plotItem=A(o,l,u,e.overAttr),e.cssConf=l,n=(p=k(e,o)).conf,s.textMargin=n.rectShiftY,l=e.textRect=n.textRect,f=S.getSmartText(n.label,l.width,l.height).text,(a=e.labelItem)?(n=e.highlightItem,x.graphicPool(!0,"labelItem",a,u),x.graphicPool(!0,"highlightItem",n,u)):r=r||{},r=R(f,l,{textAttrs:p.attr,highlightAttrs:p.highlight},r,e.overAttr),e.labelItem=r.label,e.highlightItem=r.highlightMask,e.plotItem=d,c.virginNode=e,c.plotItem=d,c.textItem=r,c.virginNode.dirtyNode=c,e.getColorValue()&&(m=V.tooltipSeparationCharacter+y),c.toolText=V.showTooltip?z.parseTooltext(V.plotToolText,[1,2,3,119,122],{label:e.getLabel(),formattedValue:b,formattedsValue:y},{value:e.getValue(),svalue:e.getColorValue()})||e.getLabel()+V.tooltipSeparationCharacter+b+m:j,c.rect=o,g.hover=[function(t){var e,i,o;o=_.getInstance("hover"),i=this.virginNode,e=B&&!i.next?(e=i.getParent())?e:i:this.virginNode,o.set("element",e),o=e.cssConf,o=O(o.fill&&E(o.fill,80),60),t.attr({fill:o}),D(this)}.bind(c),function(t){var e;e=_.getInstance("hover").get("element").cssConf,e=O(e.fill||"#fff",0),t.attr({fill:e}),M(this)}.bind(c)],g.tooltip=[c.toolText],g.click=[function(){H(this,w)}.bind(c)],(o=e.hotItem)&&x.graphicPool(!0,"hotItem",o,u),P.push({node:e,key:"hotItem",plotDetails:c,evtFns:g,callback:F}),h=void 0!==N&&e.getDepth()>=N?void 0:e.getChildren()))for(u=0,s=(c=I(h,function(t,e){var i,o,n,a=0,r=[];for(i=new T({width:t.effectiveRect.width,height:t.effectiveRect.height,x:t.effectiveRect.x,y:t.effectiveRect.y},e.getValue()),o=h.length;a++!==o;)n=h[a-1],!1===i.addNode(n)?(i=i.getNextLogicalDivision(),i=new T(i,e.getValue()-v),a--):(v+=parseFloat(n.getValue(),10),r.push(n));return r},s)).length;u<s;u++)t(g=c[u],g.rect)}(w,i)}}},(o.prototype=Object.create(t.prototype)).constructor=t,o.prototype.order=function(t){var e=l[h],i=e.orderNodes;return i?i.apply(t,[e]):t},i.init=function(t,e,i){return h=t,d=e,f=c.setMaxDepth(i),l[h]},i.plotOnCanvas=function(t,e,i){return g=n(t,i),a},i.applyShadeFiltering=function(t,e){var i,o;return o=l[h].applyShadeFiltering(s.getBucket(),t,e),function(t){(i=Array.prototype.slice.call(arguments,0)).unshift(t),o.apply(s.getBucket(),i)}},i.setTreeBase=function(t){return t&&(g=t)},i.realTimeUpdate=r,i.makeTree=n,i},p=function(o,c,h,g){function d(t){var e,i=0;if(e=o,!t.length)return o;for(;e;){if(e=n.call(e,t[i]),i===t.length-1&&e)return s=e.getValue(),e;i+=1}}function n(t){var e,i,o,n=this.getChildren()||[],a=n.length;for(e=0;e<a;e+=1)if((o=n[e]).label.toLowerCase().trim()===t.toLowerCase().trim()){i=o;break}return i}var s;return{deleteData:function(t,e){var i=d(t),o=(void 0).iterator(i).df,n=i&&i.getParent(),a=i&&i.getSiblingCount("left"),r=n&&n.getChildren(),l=(void 0).getVisibleRoot();if(i&&n){for(r.splice(a,1),i===l&&(l=i.getParent()||l);i;)h.disposeItems(i),i=o.next();for(;n;)n.setValue(-s,!0),n=n.getParent();e&&c(l)}},addData:function(t,e,i,o){for(var n,a,r,l=0,h=!0,s=(void 0).getVisibleRoot();t.length;)if(n=t.pop(),l=(n=(void 0).makeTree(n,g,!1)).getValue(),a=d(e||[]))for(a.getChildren()||(r=a.getValue(),h=!1),a.addChildren(n,o);a;)a.setValue(l,h),r&&(l-=r,h=!(r=void 0)),a=a.getParent();i&&c(s)}}},a=function(T,t,S){function i(){}function e(t){var e=V.plotBorderThickness;n.apply(T.getVisibleRoot(),[R,{width:t.effectiveWidth,height:t.effectiveHeight,x:t.startX,y:t.startY,horizontalPadding:V.horizontalPadding,verticalPadding:V.verticalPadding},B]),V.plotBorderThickness=e}function A(t,e,i){var o=t.width,n=t.height,a=V.seperatorAngle/2;t=["M",t.x,t.y];var r=u(a?n/2*(1-f(a)):i,15);return i=function(t){return{both:["h",o,"v",t,"h",-o,"v",-t],right:["h",o,"v",t,"h",-o,"l",r,-t/2,"l",-r,-t/2],no:["h",o,"l",r,t/2,"l",-r,t/2,"h",-o,"l",r,-t/2,"l",-r,-t/2],left:["h",o,"l",r,t/2,"l",-r,t/2,"h",-o,"v",-t]}},{path:t.concat(i(n)[e]),_path:t.concat(i(0)[e]),offset:r}}function o(){var t=Array.prototype.splice.call(arguments,0);t.push(!0),s("navigationBar").apply(this,t)}var R,n,F,V,B,a,r,l,h=function(t,e){var a,r,i,o,n,l,h,s,c,g,d,f,p=T.mapColorManager(V,V.colorRange,!0),u={get:function(t,e,i){var o={y:t.startY,height:t.effectiveHeight},n=(e=a[e]).getParent();return o.x=g||(g=t.startX),g=i?g+(o.width=t.effectiveWidth*(e.getValue()/n.getValue())):g+(o.width=t.effectiveWidth/r),o},resetAllocation:function(){g=void 0}},v=T.initConfigurationForlabel({x:5,y:5},V.parentLabelLineHeight,V),b=B.drawPolyPath,y=B.drawText,m=B.drawHot,x={navigationHistory:{path:"polyPathItem",label:"pathlabelItem",highlightItem:"pathhighlightItem",hotItem:"pathhotItem"}},w=(P=R.chart).config.trackerConfig,k=P.components.gradientLegend,P=P.linkedItems.smartLabel,C=function(e){return function(){var t=T.context.getInstance("ClickedState").get("VisibileRoot")||{};w.length=0,t.state="drillup",t.node=[{virginNode:T.getVisibleRoot()},e],k&&k.enabled&&k.resetLegend(),S.draw([e,e,e])}},I=V._setStyle;for(i=_.get().navigationBar,l=2*L("navigationBar"),i=(I=D(i*F.effectiveHeight-(l+6),I.fontSize.replace(/\D+/g,"")))+"px",x.stacked={path:"stacked"+x.navigationHistory.path,label:"stacked"+x.navigationHistory.label,highlightItem:"stacked"+x.navigationHistory.highlightItem,hotItem:"stacked"+x.navigationHistory.hotItem},u.resetAllocation(),d=e,f=T.getVisibleRoot(),(a=d?f.getChildren():f.getPath()||[].concat(f)).pop(),r=a.length,P.setStyle({fontSize:i,lineHeight:i}),i=0;i<r;i+=1)l=a[i],o=(n=A(h=u.get(t,i,e),e?"both":1===r?"both":0===i?"left":i<r-1?"no":"right")).offset,l[x[e?"stacked":"navigationHistory"].path]=b(n,p(l,!0,!0),i),(c=(s=(n=v(l,h,!1,!0)).conf).textRect).width-=2*o,c.y=h.y+h.height/2,o=y(o=P.getSmartText(s.label,c.width,H(I,c.height)).text,c,{textAttrs:n.attr,highlightAttrs:n.highlight},{y:h.height/10,"font-size":V._setStyle.fontSize,"font-family":V._setStyle.fontFamily},(e?"stacked":"")+"path"),l[x[e?"stacked":"navigationHistory"].label]=o.label,l[x[e?"stacked":"navigationHistory"].highlightItem]=o.highlightMask,w.push({node:l,key:x[e?"stacked":"navigationHistory"].hotItem,plotDetails:{rect:h},evtFns:{click:[C(l)],hover:[function(){},function(){}],tooltip:[V.showTooltip?l.getLabel():j]},callback:m})},s=function(t){return{treeMap:e,navigationBar:h,stackedNavigation:o}[t]},_=(r={treeMap:1,navigationBar:0,stackedNavigation:0},{set:function(t){var e=u(V.navigationBarHeightRatio,V.navigationBarHeight/F.effectiveHeight,.15),i=V.labelFontSize?H(V.labelFontSize,V.baseFontSize):V.baseFontSize,o=2*L("navigationBar");(e=H((6+i+o)/F.effectiveHeight,e))<.1?e=.1:.15<e&&(e=.15),V.navigationBarHeightRatio=e,r=t?{treeMap:1-e,navigationBar:e,stackedNavigation:0}:{treeMap:1,navigationBar:0,stackedNavigation:0}},get:function(){return r}}),c=0,L=function(t){var e=V.plotBorderThickness,i=V.navigationBarBorderThickness;return V.verticalPadding+("navigationBar"===t?i:e)},g=function(t){var e=F.effectiveWidth,i=F.effectiveHeight,o=L(t);return t=_.get()[t],1<=c&&(c=0),c+=t,{effectiveHeight:d(t*i*100)/100-o,effectiveWidth:e,startX:F.startX,startY:F.startY+o+d((c-t)*i*100)/100}};return(i.prototype.constructor=i).prototype.init=function(t,e){(this.conf||(this.conf={})).name=t.name,this.setDrawingArea(t.drawingAreaMeasurement),this.draw=this.draw(e)},i.prototype.setDrawingArea=function(t){this.conf.drawingAreaMeasurement=t},i.prototype.draw=function(e){return function(){var t=this.conf;0<t.drawingAreaMeasurement.effectiveHeight&&e(t.drawingAreaMeasurement)}},i.prototype.eventCallback=function(){},l=[],a={get:function(){return l},set:function(t){var e;return t?((e=new i).init({name:t.type,drawingAreaMeasurement:t.drawingArea},t.drawFn),l.push(e)):l.length=0,l}},S.init=function(){var t,e=["navigationBar","treeMap","stackedNavigation"];for(t=Array.prototype.slice.call(arguments,0),R=t[0],F=t[1],V=R.conf,B=t[2],n=t[4],a.get().length>=e.length&&a.set();e.length;)t=e.shift(),a.set({type:t,drawFn:s(t),drawingArea:g(t)})},S.draw=function(t){var e,i,o;for(e=T.getVisibleRoot(),B.disposeChild(e),t&&(e=t[1]),e.getParent()?V.showNavigationBar&&S.heightProportion.set(!0):S.heightProportion.set(!1),i=a.get(),e=0;e<i.length;e+=1)(o=i[e]).setDrawingArea(g(o.conf.name)),t&&T.setVisibleRoot(t[e]),o.draw()},S.heightProportion=_,S.remove=function(){var t=T.getVisibleRoot();t&&B.disposeChild(t)},S}}])});