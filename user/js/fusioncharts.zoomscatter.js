!function(t){"object"==typeof module&&void 0!==module.exports?module.exports=t:t(FusionCharts)}(function(e){e.register("module",["private","modules.renderer.js-kdtree",function(){function e(t){function h(t,e,a){var i=t[e];t[e]=t[a],t[a]=i}var e,f=t&&t[0]&&t[0].r||5,g=Math.max,d=Math.floor,m=Math.sqrt,u=Math.min,p=Math.log,v=Math.exp,x=Math.pow;for(e=(t=t||[]).length;e--;)t[e].r>f&&(f=t[e].r),t[e].i=e,t[e].x=+t[e].x,t[e].y=+t[e].y;return{tree:0===t.length?{}:function t(e,a,i,o){var n,s={};return n=o?"y":"x",a===i?s.point=e[a]:1==i-a?e[a][n]>e[i][n]?(s.point=e[a],s.left={point:e[i]}):(s.point=e[i],s.left={point:e[a]}):(n=a+i>>1,o?function t(e,a,i,o){for(var n,s,r,c,l;i<o;){for(600<o-i&&(s=a-i+1,r=p(n=o-i+1),c=.5*v(2*r/3),l=.5*m(r*c*(n-c)/n)*(s-n/2<0?-1:1),r=g(i,d(a-s*c/n+l)),n=u(o,d(a+(n-s)*c/n+l)),t(e,a,r,n)),n=e[a],c=o,h(e,s=i,a),e[o].y>n.y&&h(e,i,o);s<c;){for(h(e,s,c),s++,c--;e[s].y<n.y;)s++;for(;e[c].y>n.y;)c--}e[i].y===n.y?h(e,i,c):h(e,++c,o),c<=a&&(i=c+1),a<=c&&(o=c-1)}}(e,n,a,i):function t(e,a,i,o){for(var n,s,r,c,l;i<o;){for(600<o-i&&(s=a-i+1,r=p(n=o-i+1),c=.5*v(2*r/3),l=.5*m(r*c*(n-c)/n)*(s-n/2<0?-1:1),r=g(i,d(a-s*c/n+l)),n=u(o,d(a+(n-s)*c/n+l)),t(e,a,r,n)),n=e[a],c=o,h(e,s=i,a),e[o].x>n.x&&h(e,i,o);s<c;){for(h(e,s,c),s++,c--;e[s].x<n.x;)s++;for(;e[c].x>n.x;)c--}e[i].x===n.x?h(e,i,c):h(e,++c,o),c<=a&&(i=c+1),a<=c&&(o=c-1)}}(e,n,a,i),s.point=e[n],s.left=t(e,a,n-1,!o),s.right=t(e,n+1,i,!o)),s}(t,0,t.length-1,!1),search:function(i,o,a){function e(t,e){return"circle"===a?m(x(t-i,2)+x(e-o,2))<=h:h<=t&&t<=g&&d<=e&&e<=u}function n(t){var e,a=i>=t.x1&&i<=t.x2&&o>=t.y1&&o<=t.y2;e=t.point.y,e=m(x(i-t.point.x,2)+x(o-e,2)),l?a?p?t.point.i>l.point.i&&(l=t,p=a,v=e):(l=t,p=a,v=e):!p&&e<v&&(l=t,p=a,v=e):(l=t,p=a,v=e)}function s(t){"circle"===a?h=t:(h=i-t||0,g=i+t||0,d=o-t||0,u=o+t||0)}function r(t){t&&t.point&&(s(t.point.r),e(t.point.x,t.point.y)&&n(t),h<=t.point.x&&c(t.left),g>=t.point.x&&c(t.right))}function c(t){t&&t.point&&(s(t.point.r),e(t.point.x,t.point.y)&&n(t),d<=t.point.y&&r(t.left),u>=t.point.y&&r(t.right))}var l,h=i-f,g=i+f,d=o-f,u=o+f,p=!1,v=0;return r(this.tree),l&&l.point||l}}}function t(t){this.configure(t)}var a=this.hcLib,E=function(t,e,a,i,o){return Math.pow(a-t,2)+Math.pow(i-e,2)<=Math.pow(o,2)},L=Math.PI,k=Math.cos,P=Math.sin,s=Math.max,r=Math.min,M=L/180,X=function(t,e,a,i,o,n){return a<=s(t,o)&&a>=r(t,o)&&i<=s(e,n)&&i>=r(e,n)},Y=function(t,e,a,i,o,n){return e=(i-e)*(o-a),t=(a-t)*(n-i),isNaN(e)&&(e=0),isNaN(t)&&(t=0),0===(t=e-t)?0:0<t?1:2};(t.prototype={configure:function(t){this.validatorFn=t?this.shapeValidator():this.defaultValidator()},defaultValidator:function(){var a=this;return function(t){var e=a.mousePoint;return!!(t&&Math.pow((t.x-e.x)/a.xLimit,2)+Math.pow((t.y-e.y)/a.yLimit,2)<=1)}},shapeValidator:function(){var C=this;return function(t){var e,a,i=C.mousePoint,o=t&&t.shapeInfo,n=!1,s=i.x;i=i.y;switch(o&&o.type){case"circle":e=o.radius,n=E(s,i,t.x,t.y,e);break;case"arc":n=o.innerradius,e=o.radius,n=!E(s,i,t.x,t.y,n)&&E(s,i,t.x,t.y,e);break;case"polygon":e=o.radius,a=o.startAngle,o=o.sides;t:{n=t.x,t=t.y;var r,c,l,h,g,d,u=0;if(r=!1,E(s,i,n,t,e)&&3<=o){for(d=2*L/o,c=n+e*k(-(r=void 0===a?.5*L:a%360*M)),g=t+e*P(-r),a=0;a<o;a++){var p=c,v=g,f=l=n+e*k(-(r+=d)),m=h=t+e*P(-r),x=s,y=i,b=i,w=Y(p,v,f,m,x,y),T=Y(p,v,f,m,1/0,b),_=Y(x,y,1/0,b,p,v),F=Y(x,y,1/0,b,f,m);if(w!==T&&_!==F||0===w&&X(p,v,x,y,f,m)||0===T&&X(p,v,1/0,b,f,m)||0===_&&X(x,y,p,v,1/0,b)||0===F&&X(x,y,f,m,1/0,b)){if(0===Y(c,g,s,i,l,h)){n=X(c,g,s,i,l,h);break t}u++}c=l,g=h}r=0!=u%2}n=r}break;case"rect":n=t.x,e=t.y,t=n+(o.width||0),o=e+(o.height||0),n=n<=s&&s<=t&&e<=i&&i<=o;break;case"default":n=!1}return n}},buildKdTree:function(t){return this.kdTree=e(t),this.tree=this.kdTree.tree,this},getNeighbour:function(t,e,a){var i=this.tree,o={x1:t.x-this.xLimit,x2:t.x+this.xLimit,y1:t.y-this.yLimit,y2:t.y+this.yLimit},n=this.validatorFn;return this.mousePoint=t,e?this.kdTree&&this.kdTree.search(t.x,t.y,a):i?this._searchBtwnLimit(o,i,!0,n):void 0},_compair2closest:function(t,e){return!t||t&&e&&e.i>t.i?e:t},_searchBtwnLimit:function(t,e,a,i){var o,n,s=a?t.x1:t.y1,r=a?t.x2:t.y2;if(void 0!==(o=e&&e.point&&e.point[a?"x":"y"]))return i(e.point)&&(n=e.point),s<=o&&e.left&&(n=this._compair2closest(n,this._searchBtwnLimit(t,e.left,!a,i))),o<=r&&e.right&&(n=this._compair2closest(n,this._searchBtwnLimit(t,e.right,!a,i))),n},_setSearchLimit:function(t,e){this.xLimit=t,this.yLimit=e}}).constructor=t,a.KdTree=t}]),e.register("module",["private","modules.renderer.js-zoomscatter",function(){var y=this,k=y.hcLib,P=k.parseTooltext,u=k.Raphael,w=y.window,b=k.addEvent,g=k.removeEvent,T=w.MouseEvent,_=w.document,M=k.BLANKSTRING,X=k.pluck,Y=k.pluckNumber,l=k.getFirstValue,h=k.toRaphaelColor,a=k.hasSVG,F=k.isIE||k.isIE11,d=k.getFirstColor,C=k.hasTouch,E="rgba(192,192,192,"+(F?.002:1e-6)+")",L=(t=Math).round,S=t.min,A=t.max,D=t.abs,p=t.cos,v=t.sin,f=t.sqrt,m=t.pow,s=t.floor,V=2*Math.PI,x=k.getMouseCoordinate,I=k.POSITION_BOTTOM,H=k.chartAPI,B=k.HUNDREDSTRING,t=!k.CREDIT_REGEX.test(w.location.hostname),z=function(t,e){var a=x(e.linkedItems.container,t),i=a.chartX,o=a.chartY,n=(c=e.config).canvasLeft,s=c.canvasTop,r=c.canvasLeft+c.canvasWidth,c=c.canvasHeight+c.canvasTop;return a.insideCanvas=!1,a.originalEvent=t,n<i&&i<r&&s<o&&o<c&&(a.insideCanvas=!0),a},W=k.KdTree;H("zoomscatter",{standaloneInit:!0,defaultDatasetType:"zoomscatter",applicableDSList:{zoomscatter:!0},highlightEnabled:!1,friendlyName:"ZoomScatter Chart",isXY:!0,defaultZeroPlaneHighlighted:!1,creditLabel:t,configure:function(){var t,e=this.config;H.scatter.configure.apply(this,arguments),t=this.jsonData.chart,e.stepZoom=1-Y(t.stepzoom,25)/100,e.showToolBarButtonToolText=Y(t.showtoolbarbuttontooltext,1),e.btnResetChartToolText=X(t.btnresetcharttooltext,"Reset Chart"),e.btnZoomOutToolText=X(t.btnzoomouttooltext,"Zoom out to previous level"),e.btnZoomInToolText=X(t.btnzoomintooltext,"<strong>Zoom in</strong><br/>Or double-click on plot to zoom-in"),e.btnSelectZoomToolText=X(t.btnselectzoomtooltext,"<strong>Select a region to zoom-in</strong><br/>Click to enable pan mode."),e.btnPanToolText=X(t.btnpantooltext,"<strong>Drag to move across chart</strong><br/>Click to enable select-zoom mode.")},_setAxisLimits:function(){var t,e,a=this.jsonData,i=this.components.xAxis,o=X(a.chart.xaxislabelmode,"categories"),n=(a=((a=a.categories&&a.categories[0])&&a.category||[]).slice(),1/0),s=-1/0;if("auto"===o||0===a.length){for(H.mscartesian._setAxisLimits.call(this),o=i[0].getLimit(),i[0].setAxisConfig({hasCategory:0}),i[0].resetCategoryAxisComponents(),t=0;t<a.length;t+=1)(e=a[t].x)&&(e<n&&(n=e),s<e&&(s=e));(s>o.max||n<o.min)&&(s=A(s,o.max),n=S(n,o.min),i[0].setDataLimit(s,n))}else i[0].resetNumericAxisComponents(),H.scatterBase._setAxisLimits.call(this)},_createAxes:function(){var t=this.components;H.scatter._createAxes.call(this,arguments),t.yAxis[0].setAxisConfig({animateAxis:!1}),t.xAxis[0].setAxisConfig({animateAxis:!1})},_spaceManager:function(){var t,e,a=this.config,i=(y=this.components).xAxis&&y.xAxis[0];e=y.yAxis&&y.yAxis||[];var o,n,s=y.legend.config.legendPos,r=a.xDepth,c=a.yDepth,l=a.canvasBgDepth,h=a.canvasBaseDepth,g=a.canvasBasePadding,d=y.canvas.config.canvasBorderWidth,u=a.realTimeConfig&&a.realTimeConfig.showRTValue,p=a.borderWidth,v=a.canvasMarginTop,f=a.canvasMarginBottom,m=a.canvasMarginLeft,x=a.canvasMarginRight,y=a.minCanvasHeight,b=a.minCanvasWidth;t=a.minChartWidth;var w,T,_=a.minChartHeight,F=a.height,C=a.width,E=a._initConfig||(a._initConfig={}),L=!1,k=a.origCanvasTopMargin,P=a.origCanvasBottomMargin,M=[];for(E.canvasLeft=a.canvasLeft,E.canvasWidth=a.canvasWidth,E.canvasHeight=a.canvasHeight,E.canvasTop=a.canvasTop,E.availableHeight=a.availableHeight,E.availableWidth=a.availableWidth,a.canvasWidth-2*p<t&&(n=(a.canvasWidth-t)/2),a.canvasHeight-2*p<_&&(o=(a.canvasHeight-_)/2),this._allocateSpace({top:o||p,bottom:o||p,left:n||p,right:n||p}),a.origCanvasWidth=a.canvasWidth,a.origCanvasLeft=a.canvasLeft,a.canvasRight=a.canvasLeft+a.canvasWidth,a.origCanvasRight=a.canvasRight,p=0,n=e.length;p<n;p++)o=e[p],t=.7*a.availableWidth,t=o&&o.placeAxis(t)||{},M.push({axisIndex:p,spaceTaken:t}),o&&this._allocateSpace(t);e=.7*a.canvasHeight,this._manageActionBarSpace&&this._allocateSpace(this._manageActionBarSpace(e)),this._manageLegendSpace(void 0),c&&(this._allocateSpace({bottom:c}),a.shift=r+g+h),l&&this._allocateSpace({right:l}),a.canvasWidth-2*d<b&&(T=(a.canvasWidth-b)/2),this._allocateSpace({left:T||d,right:T||d}),C-m-x<b&&(c=a.canvasWidth-b,r=m+x,m=a.canvasMarginLeft=c*m/r,x=a.canvasMarginRight=c*x/r),m=m>a.canvasLeft?m-a.canvasLeft:0,this._allocateSpace({left:m,right:x>C-a.canvasRight?x+a.canvasRight-C:0}),e=s===I?.6*a.canvasHeight:.6*a.canvasWidth,this._manageChartMenuBar(e),e=.2*a.availableHeight,this._allocateSpace(this._getSumValueSpace(e)),e=.3*a.availableHeight,a.origCanvasHeight=a.canvasHeight,a.canvasBottom=a.canvasTop+a.canvasHeight,a.origCanvasBottom=a.canvasBottom,a.origCanvasTop=a.canvasTop,a.realtimeEnabled&&(u?this._allocateSpace(this._realTimeValuePositioning(e)):this._hideRealTimeValue()),e=.6*a.availableHeight,a.xAxisSpaceAllocation=s=i&&i.placeAxis(e),i&&this._allocateSpace(s),this._getDSspace&&this._allocateSpace(this._getDSspace(.4*a.canvasWidth)),e=.3*a.availableHeight,this._manageScrollerPosition&&this._manageScrollerPosition(e),a.canvasHeight-2*d<y&&(w=(a.canvasHeight-y)/2),this._allocateSpace({top:w||d,bottom:w||d}),this._allocateSpace({bottom:h}),F-v-f<y&&(L=!0,c=a.canvasHeight-y,r=v+f,v=a.canvasMarginTop=c*v/r,f=a.canvasMarginBottom=c*f/r),i=v>a.canvasTop?v-a.canvasTop:0,h=f>F-a.canvasBottom?f+a.canvasBottom-F:0,this._allocateSpace({top:i,bottom:h}),L&&(r=k+P,y<(L=a.canvasHeight)&&(i=(c=L-y)*k/r,h=c*P/r),this._allocateSpace({top:i,bottom:h})),a.actualCanvasMarginTop=i,a.actualCanvasMarginLeft=m},_createToolBox:function(){var t,e,a,i,o,n,s,r,c,l=this,h=l.config;t=(i=l.components).chartMenuBar,e=i.actionBar,c=h.showToolBarButtonToolText;var g=h.stepZoom;t&&t.drawn||e&&e.drawn||(H.mscartesian._createToolBox.call(l),e=(t=i.tb).graphics||(t.graphics={}),a=(a=t.getAPIInstances(t.ALIGNMENT_HORIZONTAL)).Symbol,i=(i.chartMenuBar||i.actionBar).componentGroups[0],o=e.zoomInButton=new a("zoomInIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){l.zoom(g)},tooltext:c&&h.btnZoomInToolText||M}),n=e.zoomOutButton=new a("zoomOutIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){var t=h.viewPortHistory;1<t.length&&(t=t.slice(-2,-1)[0],l.updateVisual(t.x,t.y,t.scaleX,t.scaleY))},tooltext:c&&h.btnZoomOutToolText||M}),s=e.resetButton=new a("resetIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){var t=h.viewPortConfig,e=l.graphics;1<h.viewPortHistory.length&&(t.isReset=!0,l.zoomSelection(0,0,h.canvasWidth,h.canvasHeight),h.viewPortHistory.splice(1),e.trackerGroup.attr({cursor:"default"}),l.updateButtonVisual(),l.updateSelectionBox(0,0,0,0)),y.raiseEvent("zoomReset",{},l.chartInstance,[l.chartInstance.id])},tooltext:c&&h.btnResetChartToolText||M}),r=e.toggleZoomInButton=new a("zoomModeIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){l.toogleDragPan(!0)},tooltext:c&&h.btnSelectZoomToolText||M}),c=e.togglePanButton=new a("panModeIcon",void 0,t.idCount++,t.pId).attachEventHandlers({click:function(){l.toogleDragPan(!0)},tooltext:c&&h.btnPanToolText||M}),i.addSymbol(c,!0),i.addSymbol(r,!0),i.addSymbol(s,!0),i.addSymbol(n,!0),i.addSymbol(o,!0))},_createLayers:function(){var t=this.graphics,e=this.components.paper;H.scatter._createLayers.call(this),!t.imageContainer&&(t.imageContainer=e.group("dataset-orphan",t.datasetGroup)),this.__preDraw()},_dist:function(t,e){var a,i=this.components;if(a=i.xAxis[0],i=i.yAxis[0],t&&e)return a=(t.x-e.x)*a.getPVR(),i=(t.y-e.y)*i.getPVR(),Math.sqrt(Math.pow(a,2)+Math.pow(i,2))},__preDraw:function(){var t=this.graphics,e=t.imageContainer,a=this.config,i=a.canvasLeft,o=a.canvasTop,n=a.canvasWidth,s=a.canvasHeight,r=this.jsonData.chart,c=(c=this.linkedItems).eventListeners||(c.eventListeners=[]),l=this.linkedItems.container,h=this.components.paper;a.updateAnimDuration=500,e.transform("t"+i+","+o),e.attr({"clip-rect":i+","+o+","+n+","+s}),a.status="zoom",a.maxZoomLimit=Y(r.maxzoomlimit,1e3),a.viewPortHistory=[{scaleX:1,scaleY:1,x:0,y:0}],!t.trackerElem&&(t.trackerElem=h.rect(i,o,n,s,0,t.trackerGroup).attr({fill:E,stroke:E})),g(l,C?"touchstart":"mousemove",this.searchMouseMove),c.push(b(l,"touchstart mousemove",this.searchMouseMove,this)),this.zoomPanManager(e)},searchMouseMove:function(t){var e,a,i,o=t.data,n=o.config,s=n.viewPortConfig,r=(h=o.components).xAxis[0],c=h.yAxis[0],l=h.trendlines,h=h.vTrendlines;o.linkedItems.container&&!n.isDragging&&((e=z(t,o))&&e.insideCanvas?(a=n.canvasTop,i=r.getAxisConfig("axisDimention").x||n.canvasLeft,e=s.lastMouseCoordinate={x:Number(r.getValue(e.chartX-i)),y:Number(c.getValue(e.chartY-a))},n.lastMouseEvent=t,n.isDragging||(n=o._bestNeighbour(s.lastMouseCoordinate),l=o._getHoveredTrendLine(e,l),h=o._getHoveredTrendLine(e,h),l&&l.showontop?o._drawTooltip(t.originalEvent,l.tooltext):l||!h||n?!l||h||n?l&&h&&!n&&o._drawTooltip(t.originalEvent,h.tooltext):o._drawTooltip(t.originalEvent,l.tooltext):o._drawTooltip(t.originalEvent,h.tooltext)),s.neighbourSearchTimer=void 0):o.highlightPoint(!1))},updateSelectionBox:function(t,e,a,i){var o=this.config,n=this.graphics,s=this.components.paper,r=o.viewPortConfig,c=o.cursor,l=n.selectionBox,h=o.canvasRight,g=o.canvasLeft,d=o.canvasTop,u=o.canvasBottom,p=a<t?t:a,v=i<e?e:i,f=a-t,m=e-i,x=(c=c?0<f&&0<m?"ne-resize":f<0&&0<m?"nw-resize":f<0&&m<0?"sw-resize":0<f&&m<0?"se-resize":"default":"default",(x=t<a?t:a)<g?g:h<x?h:x),y=(y=e<i?e:i)<d?d:u<y?u:y;f=t===a&&e===i?0:(h<p?h:p<g?g:p)-x,m=t===a&&e===i?0:(u<v?u:v<d?d:v)-y;l?l.attr({x:x,y:y,width:f,height:m,cursor:c}):n.selectionBox=s.rect(x,y,f,m).attr({"stroke-width":1,stroke:"red",fill:"#00FF00",opacity:.2,cursor:c}),n.trackerGroup.attr({cursor:c}),o.cursor=c,r.selectionDimensions||(r.selectionDimensions={startX:0,endX:0,startY:0,endY:0}),r.selectionDimensions.startX=t,r.selectionDimensions.endX=e,r.selectionDimensions.startY=a,r.selectionDimensions.endY=i},getValue:function(t){var e=this.config,a=this.components,i=e.viewPortConfig;t=this.getOriginalPositions(t.x,t.y,t.x,t.y);var o=a.xAxis[0].config.axisRange,n=(a=a.yAxis[0].config.axisRange,o.min),s=a.max;return{x:n+(t[0]-e.canvasLeft)/(e.canvasWidth*i.scaleX/(o.max-n)),y:s-(t[1]-e.canvasTop)/(e.canvasHeight*i.scaleY/(s-a.min))}},_getTouchViewPort:function(t,e,a){var i,o,n=(o=this.config).canvasLeft,s=o.canvasTop;i=o.canvasWidth,o=o.canvasHeight;var r=S(t[0].chartX,t[1].chartX)-n,c=S(t[0].chartY,t[1].chartY)-s,l=Math.abs(t[1].chartX-t[0].chartX);t=Math.abs(t[1].chartY-t[0].chartY);n=S(e[0].chartX,e[1].chartX)-n;var h=S(e[0].chartY,e[1].chartY)-s;s=Math.abs(e[1].chartX-e[0].chartX)/l*a.scaleX;return e=Math.abs(e[1].chartY-e[0].chartY)/t*a.scaleY,r=a.x+r/a.scaleX-n/s,a=a.y+c/a.scaleY-h/e,{x:(i-=i/(s=s<1?1:s))<(r=r<0?0:r)?i:r,y:(o-=o/(e=e<1?1:e))<(a=a<0?0:a)?o:a,scaleX:s,scaleY:e}},getOriginalPositions:function(t,e,a,i){var o=this.config,n=(c=o.viewPortConfig).scaleX,s=c.scaleY,r=c.x,c=c.y,l=S(t,a);return t=A(t,a),a=S(e,i),e=A(e,i),[r+(l=l<0?0:l)/n,c+(a=a<0?0:a)/s,((t=t>o.canvasWidth?o.canvasWidth:t)-l)/n,((e=e>o.canvasHeight?o.canvasHeight:e)-a)/s]},zoomSelection:function(t,e,a,i){var o=this.config;a&&i&&(a=Math.abs(o.canvasWidth/a),i=Math.abs(o.canvasHeight/i),this.updateVisual(t,e,a,i))},toogleDragPan:function(t){var e=this.config,a=e.status;t&&(e.status="zoom"===a?"pan":"zoom",y.raiseEvent("zoomModeChanged",{panModeActive:e.status},this.chartInstance,[this.chartInstance.id])),this.updateButtonVisual()},updateManager:function(t){var e,a=this.components.dataset,i=a.length;for(e=0;e<i;e+=1)a[e].draw(t);t||this._drawQuadrant()},zoomPanManager:function(){var s,r=[],c=[],l=this,h=l.config,g=l.graphics,d=l.components,u=d.xAxis[0],t=d.eventListeners||(d.eventListeners=[]),p=l.viewPortConfig,v=!1,f=0,m={},x=function(t){var e=t.chartX,a=t.chartY,i=u.getAxisConfig("axisDimention").x||h.canvasLeft,o=h.canvasTop,n=h.canvasRight,s=h.canvasBottom;e<i&&(t.chartX=A(e,i)),n<e&&(t.chartX=S(e,n)),a<o&&(t.chartY=A(a,o)),s<a&&(t.chartY=S(a,s))},e={start:function(t){p=h.viewPortConfig,C=!!t.touches,r[0]=z(t,l),l.updateSelectionBox(0,0,0,0),C&&(v=!1,2===t.touches.length&&(v=!0,m.x=p.x,m.y=p.y,m.scaleX=p.scaleX,m.scaleY=p.scaleY,r[0]=z(t.touches.item(0),l),r[1]=z(t.touches.item(1),l))),h.isDragging=!1,"pan"===h.status&&(h.panStartX=p.x,h.panStartY=p.y,r[0].insideCanvas&&g.trackerGroup.attr({cursor:"move"}))},on:function(t){var e,a,i;i=h.panStartX;var o=h.panStartY;e=p.scaleX,a=p.scaleY;var n=d.xAxis[0],s=d.yAxis[0];C=!!t.touches,c[0]=z(t,l),c[0].insideCanvas?"pan"===h.status&&g.trackerGroup.attr({cursor:"move"}):g.trackerGroup.attr({cursor:"default"}),C&&t&&(2===t.touches.length?(v=!0,c[0]=z(t.touches.item(0),l),c[1]=z(t.touches.item(1),l)):v=!1),!h.isDragging&&(!C||2<D(c[0].chartX-r[0].chartX)||2<D(c[0].chartY-r[0].chartY))&&(h.isDragging=!0,l.highlightPoint(!1),"zoom"===h.status&&(r[0].pointValue=l.getValue({x:r[0].chartX,y:r[0].chartY}),y.raiseEvent("selectionStart",{chartX:r[0].chartX,chartY:r[0].chartY,pageX:r[0].pageX,pageY:r[0].pageY,selectionTop:r[0].chartX+h.canvasLeft,selectionLeft:r[0].chartY+h.canvasTop,selectionWidth:0,selectionHeight:0,startXVAlue:r[0].pointValue.x,startYVAlue:r[0].pointValue.y},l.chartInstance,[l.chartInstance.id]))),h.isDragging&&(v?(r[0].insideCanvas||r[1].insideCanvas)&&(i=l._getTouchViewPort(r,c,m),l.updateVisual(i.x,i.y,i.scaleX,i.scaleY,!0)):"zoom"===h.status?l.updateSelectionBox(r[0].chartX,r[0].chartY,c[0].chartX,c[0].chartY):"pan"!==h.status||1===e&&1===a||!r[0].insideCanvas||(i-=(t=r&&c[0].chartX-r[0].chartX)/e,o-=(r&&c[0].chartY-r[0].chartY)/a,e=h.canvasWidth*(e-1)/e,a=h.canvasHeight*(a-1)/a,p.x=e<i?e:i<0?0:i,p.y=a<o?a:o<0?0:o,l.updateManager(),n.draw(),s.draw()))},end:function(t){var e,a=z(t,l),i=u.getAxisConfig("axisDimention").x||h.canvasLeft,o=h.canvasTop;e=h.canvasWidth/4;var n=h.canvasHeight/4;a=isNaN(a.chartX)||isNaN(a.chartY)?c[0]||r[0]:a;h.isDragging?(v?((r[0].insideCanvas||r[1].insideCanvas)&&(t=l._getTouchViewPort(r,c,m),l.updateVisual(t.x,t.y,t.scaleX,t.scaleY)),v=!1):"zoom"===h.status&&(t=a,e=r[0],x(e),x(t),o=l.getOriginalPositions(e.chartX-i,e.chartY-o,t.chartX-i,t.chartY-o))&&(t.pointValue=l.getValue({x:t.chartX,y:t.chartY}),y.raiseEvent("selectionEnd",{chartX:t.chartX,chartY:t.chartY,pageX:t.pageX,pageY:t.pageY,selectionTop:t.chartX+h.canvasLeft,selectionLeft:t.chartY+h.canvasTop,selectionWidth:Math.abs(t.chartX-e.chartX),selectionHeight:Math.abs(t.chartY-e.chartY),startXVAlue:e.pointValue.x,startYVAlue:e.pointValue.y,endXValue:t.pointValue.x,endYValue:t.pointValue.y},l.chartInstance,[l.chartInstance.id]),e.chartX!==t.chartX&&e.chartY!==t.chartY&&l.zoomSelection(o[0],o[1],o[2],o[3]),l.updateSelectionBox(0,0,0,0)),h.isDragging=!1,((t=c[0]||r[0]).data=l).searchMouseMove(t)):a.insideCanvas&&(f+=1,setTimeout(function(){s=void(f=0)},500),2===f?!(!t||!t.touches)===s&&(i=a.chartX-i,o=a.chartY-o,o=l.getOriginalPositions(i-e,o-n,i+e,o+n),l.zoomSelection(o[0],o[1],o[2],o[3]),t.preventDefault()):s=!(!t||!t.touches)),g.trackerGroup.attr({cursor:"default"})}};t.push(b(l.linkedItems.container,"pointerdrag",function(t){e[t.state](t.originalEvent)}))},_drawDataset:function(){var t,e=this.components.dataset,a=e.length;for(t=0;t<a;t+=1)e[t]._deleteGridImages(),e[t].graphics._grid={};this.updateVisual()},updateVisual:function(t,e,a,i,o){var n,s,r,c,l;n=this.config;var h=this.components,g=n.viewPortConfig;l=n.canvasWidth;var d=n.canvasHeight,u=l,p=d,v=n.viewPortHistory,f=(p=v.slice(-1)[0],[]),m=(f=n.status,n._initConfig);if(s=h.xAxis[0],c=h.yAxis[0],r=this.graphics,h=(h=h.quadrant)&&h.graphics.container,u=n.maxZoomLimit,g.x=isNaN(t)?t=p.x:t,g.y=isNaN(e)?e=p.y:e,g.scaleX=a||(a=p.scaleX),g.scaleY=i||(i=p.scaleY),u<a&&(g.x=t=S(t,l-l/u),g.scaleX=a=u),u<i&&(g.y=e=S(e,d-d/u),g.scaleY=i=u),o)this.updateManager(o);else for(1<a||1<i?("zoom"===f&&this.toogleDragPan(!0),a>=p.scaleX||i>=p.scaleY?(v.push({scaleX:a,scaleY:i,x:t,y:e}),f=["zoomed","zoomIn"]):(v.pop(),p=v.slice(-1)[0],g.x=p.x,g.y=p.y,g.scaleX=p.scaleX,g.scaleY=p.scaleY,f=["zoomed","zoomOut"])):(1<v.length&&v.pop(),"pan"===f&&this.toogleDragPan(!0),f=["zoomed","zoomOut"]),this.toogleDragPan(),u=n.canvasWidth,p=n.canvasHeight,t&&(t=g.x*=u/l),e&&(g.y*=p/d),n.canvasLeft=m.canvasLeft,n.canvasWidth=m.canvasWidth,n.canvasHeight=m.canvasHeight,n.canvasTop=m.canvasTop,n.availableHeight=m.availableHeight,n.availableWidth=m.availableWidth,this._spaceManager(),this._postSpaceManagement(),this.updateManager(),s.draw(),c.draw(),this._drawCanvas(),l={"clip-rect":n.canvasLeft+","+n.canvasTop+","+n.canvasWidth+","+n.canvasHeight},n.viewPortConfig&&this.graphics.imageContainer.attr({x:n.canvasLeft,y:n.canvasRight}),r.imageContainer.attr(l).transform("T"+n.canvasLeft+","+n.canvasTop),r.tracker&&r.tracker.attr(l),h&&h.attr(l),n=s.getValue(0),s=s.getValue(u),r=c.getValue(0),c=c.getValue(p),0===arguments.length&&(f=M),l=0;l<f.length;l+=1)"zoomed"===f[l]&&y.raiseEvent("zoomed",{level:v.length,startX:n,startY:r,endX:s,endY:c},this.chartInstance,[this.chartInstance.id]),"zoomIn"===f[l]?y.raiseEvent("zoomedIn",{level:v.length,startX:n,startY:r,endX:s,endY:c},this.chartInstance,[this.chartInstance.id]):"zoomOut"!==f[l]||g.isReset||y.raiseEvent("zoomedOut",{level:v.length,startX:n,startY:r,endX:s,endY:c},this.chartInstance,[this.chartInstance.id]);this.highlightPoint(!1),g.isReset=!1},getFillColor:function(t,e){return(e=parseFloat(e/100))<0?e=0:1<e&&(e=1),t||(t="#FFFFFF"),F&&!a?e?t:"transparent":(t=t.replace(/^#?([a-f0-9]+)/gi,"$1"),(t=k.graphics.HEXtoRGB(t))[3]=e.toString(),"rgba("+t.join(",")+")")},_getHoveredTrendLine:function(t,e){var a,i=(h=this.components).yAxis[0];a=e&&e.length;var o,n,s,r,c,l,h=h.xAxis[0].getPixel(t.x);i=i.getPixel(t.y);if(a)for(--a;0<=a;a--)if(r=(n=e[a]).x1,c=n.y1,o=n.x2,l=n.y2,n.isTrendZone){if(r<=h&&h<=o&&c<=i&&i<=l)return n}else if(c!==l&&r!==o?(s=o=(c-l)/(r-o),s=D(s*h+-1*i+(r=c-o*r))/f(m(s,2)+m(-1,2))):r===o?s=D(r-h):c===l&&(s=D(c-i)),s<=n.tolerance)return n},_bestNeighbour:function(t){var e,a,i,o,n,s,r,c,l,h,g,d,u=this.components,p=this.config,v=u.xAxis[0],f=u.yAxis[0],m=this.jsonData.chart,x=p.canvasLeft,y=p.canvasTop;for(d=u.numberFormatter,e=(l=u.dataset).length-1;0<=e&&(a=(g=(u=l[e]).config).showHoverEffect,c=g.showTooltip,!(u.components.kDTree&&u.visible&&(o=u.getElement(t),u=this._dist(t,o),!n||u<s)&&(n=o,(s=u)<=(r=l[i=e]&&g.zoomedRadius||0))));--e);return s<=A(r+2,5)?(t=v.getPixel(n.x)-x,y=f.getPixel(n.y)-y,x=X(n.tooltext,g.plotToolText),l=(g=(u=l[i]).config).tooltip.toolTipSepChar,s=g.tooltip.seriesNameInToolTip,r=n.x,e=n.y,n&&(h=d.yAxis(e),d=d.xAxis(r),h=Number(c)?void 0!==x?P(x,[4,5,6,7,8,9,10,11],{yaxisName:f.getAxisConfig("axisName"),xaxisName:v.getAxisConfig("axisName"),yDataValue:h,xDataValue:d},n,m,u.config):(s&&g.seriesname?g.seriesname+l:"")+"x:"+d+l+"y:"+h:M),p.lastHoveredPoint!==n&&this.highlightPoint(a,t,y,n,i,h)):(k.toolTip.hide(),this.highlightPoint(!1)),n},_drawTooltip:function(t,e){var a=this.components.paper,i=k.toolTip;e&&(i.setStyle(a),i.setPosition(t),i.draw(e,a))},highlightPoint:function(t,e,a,i,o,n){var s=this,r=s.config,c=s.components,l=s.graphics,h=c.paper,g=l.tracker,d=(c=c.dataset[o])&&c.config;o=c&&d.zoomedRadius||0;c=(m=c&&d.hoverCosmetics)&&m.fill,d=m&&m.borderColor;var u,p,v,f,m=m&&m.borderThickness,x={},y=(x=function(t){k.plotEventHandler.call(this,s,t)},i&&i.link);g||(g=l.tracker=h.circle(0,0,0,l.trackerGroup).attr({"clip-rect":r.canvasLeft+","+r.canvasTop+","+r.canvasWidth+","+r.canvasHeight}).click(x).trackTooltip(!0).hover(function(t){k.plotEventHandler.call(this,s,t,"dataplotRollover")},function(t){k.plotEventHandler.call(this,s,t,"dataplotRollout")})),i&&g.data("eventArgs",{x:i.x,y:i.y,tooltip:n,link:y}),r.lastHoveredPoint=i,(x=Number(t)?{r:o,fill:c,stroke:d,"stroke-width":m}:{r:o,fill:E,stroke:E,"stroke-width":0}).cursor=y?"pointer":"",g.attr(x).tooltip(n).transform("t"+(e+r.canvasLeft)+","+(a+r.canvasTop)),i&&(u="mouseover",p=g&&g.node,v=r.lastMouseEvent,p&&u&&(v||(v={}),v.originalEvent&&(v=v.originalEvent),v.touches&&(v=v.touches[0]),p.dispatchEvent?(T&&!F?f=new T(u,{bubbles:!!v.bubbles,cancelable:!!v.cancelable,clientX:v.clientX||v.pageX&&v.pageX-_.body.scrollLeft-_.documentElement.scrollLeft||0,clientY:v.clientY||v.pageY&&v.pageY-_.body.scrollTop-_.documentElement.scrollTop||0,screenX:v.screenX||0,screenY:v.screenY||0,pageX:v.pageX||0,pageY:v.pageY||0}):_.createEvent&&((f=_.createEvent("HTMLEvents")).initEvent(u,!!v.bubbles,!!v.cancelable),f.clientX=v.clientX||v.pageX&&v.pageX-_.body.scrollLeft-_.documentElement.scrollLeft||0,f.clientY=v.clientY||v.pageY&&v.pageY-_.body.scrollTop-_.documentElement.scrollTop||0,f.screenX=v.screenX||0,f.screenY=v.screenY||0,f.pageX=v.pageX||0,f.pageY=v.pageY||0),f.eventName=u,f&&p.dispatchEvent(f)):_.createEventObject&&p.fireEvent&&((f=_.createEventObject()).eventType=u,f.eventName=u,p.fireEvent("on"+u,f))))},zoom:function(t){var e,a;e=(i=(n=this.config).viewPortConfig).x,a=i.y;var i,o=n.canvasWidth,n=n.canvasHeight,s=o/i.scaleX,r=n/i.scaleY;e=o<(e=(e=e+s/2-(i=o<(i=s*t)?o:i)/2)<0?0:e)+i?o-i:e,a=n<(a=(a=a+r/2-(t=n<(t*=r)?n:t)/2)<0?0:a)+t?n-t:a,this.zoomSelection(e,a,i,t)},updateButtonVisual:function(){var t,e,a;e=this.config;var i,o=this.components.tb.graphics;for(t=e.status,e.viewPortHistory.length<=1?(e=["zoomOutButton","resetButton","togglePanButton"],a=["zoomInButton"],i="toggleZoomInButton"):(a=["resetButton","zoomOutButton","zoomInButton"],e=[],"zoom"===t?(a.push("togglePanButton"),i="toggleZoomInButton"):"pan"===t&&(a.push("toggleZoomInButton"),i="togglePanButton")),t=0;t<e.length;t+=1)o[e[t]].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"},normal:{fill:"#FFFFFF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],"button-disabled":!1,stroke:"#E3E3E3","stroke-opacity":1});for(t=0;t<a.length;t+=1)o[a[t]].node.attr({config:{hover:{fill:"#FFFFFF","stroke-width":1,stroke:"#aaaaaa",cursor:"pointer"},normal:{fill:"#FFFFFF",stroke:"#C2C2C2","stroke-width":1,cursor:"pointer"},disable:{fill:"#FFFFFF","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"pointer"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#C2C2C2",cursor:"pointer"}},"button-disabled":!1,fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],stroke:"#C2C2C2","stroke-opacity":1});o[i].node.attr({config:{hover:{fill:"#EFEFEF","stroke-width":1,stroke:"#EFEFEF",cursor:"default"},normal:{fill:"#EFEFEF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#E6E6E6","stroke-width":1,stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#EFEFEF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},"button-disabled":!1,fill:["#EFEFEF","#EFEFEF","#EFEFEF","#EFEFEF",!0],stroke:"#E3E3E3","stroke-opacity":1})},_drawAxis:function(){}},H.scatterBase),e.register("component",["dataset","zoomscatter",{type:"zoomscatter",configure:function(){var t,e,a,i,o,n,s,r=(n=this.chart).config;i=n.jsonData.chart;var c=n.getFillColor,l=this.JSONData;this.__base__.configure.call(this),n=this.config,e=this.components,t=X(l.anchorbordercolor,i.anchorbordercolor),n.anchorBorderThickness=X(l.anchorborderthickness,i.anchorborderthickness,t?1:0),e.kDTree=new W,n.chunkSize=Math.floor(S((l.data||[]).length/5,5e4)),t=n.staticRadius=Y(i.staticradius,0),n.radius=Y(l.radius,l.anchorradius,i.radius,i.anchorradius,t?3:.5),s=n.showHoverEffect,t=d(X(l.plotfillhovercolor,l.hovercolor,i.plotfillhovercolor,i.hovercolor,n.anchorbgcolor)),e=X(l.plotfillhoveralpha,l.hoveralpha,i.plotfillhoveralpha,i.hoveralpha,B),a=d(X(l.plotfillhovercolor,l.hovercolor,i.plotfillhovercolor,i.hovercolor,t)),o=X(l.plotfillhoveralpha,l.hoveralpha,i.plotfillhoveralpha,i.hoveralpha,B),i=Y(l.borderhoverthickness,i.borderhoverthickness,1),n.hoverCosmetics={showHoverEffect:s,fill:c(t,e),borderColor:c(a,o),borderThickness:i},n.tooltip={toolTipVisible:r.showtooltip,seriesNameInToolTip:r.seriesnameintooltip,toolTipSepChar:r.tooltipsepchar},n.lastViewPort={}},draw:function(t){var e,a,i;e=this.graphics,a=(i=this.chart).components;var o=i.graphics.imageContainer,n=a.paper;i=i.config;var s=this.visible,r=i.viewPortConfig,c=this.config,l=c.lastViewPort||{},h=!1;e.container||(e.container={line:n.group(o),plot:n.group(o)}),s&&this._conatinerHidden?this.show():s||this._conatinerHidden||this.hide(),t?this._pixelatedDraw():(l.scaleX===r.scaleX&&l.scaleY===r.scaleY||(l.scaleX=r.scaleX,l.scaleY=r.scaleY,t=a.xAxis[0],e=a.yAxis[0],a=t.getPVR(),t=e.getPVR(),i=A(c.zoomedRadius=S(c.staticRadius?c.radius:c.radius*S(r.scaleX,r.scaleY),i.canvasWidth/2,i.canvasHeight/2),2),this.components.kDTree._setSearchLimit(i/a,i/t),this._deleteGridImages(),this.graphics._grid={},h=!0),this._gridDraw(h))},_pixelatedDraw:function(){var t,e,a,i,o,n=this.chart.config;a=this.config,i=this.graphics;var s=a.drawLine,r=(g=a.lastViewPort||{}).scaleX,c=g.scaleY,l=(o=n.viewPortConfig).scaleX,h=o.scaleY,g=this.graphics._grid||(this.graphics._grid=[]);r=l/r,c=h/c,h=n.canvasWidth*r,n=n.canvasHeight*c;if(a=a._batchDarwTimers,i=i.container,clearTimeout(this.timer),a&&a.length)for(;a.length;)clearTimeout(a.shift());for(t in i.line.transform("t"+L(-o.x*o.scaleX)+","+L(-o.y*o.scaleY)),i.plot.transform("t"+L(-o.x*o.scaleX)+","+L(-o.y*o.scaleY)),g)if(o=g[t])for(e in o)(i=o[e])&&i.drawState&&((a=i.image).attr({x:i.xPixel*r,y:i.yPixel*c,width:h,height:n}),s&&(a=i.lineImage).attr({x:i.xPixel*r,y:i.yPixel*c,width:h,height:n}))},_deleteGridImages:function(){var t,e,a,i,o;e=this.config;var n=this.graphics,s=n._imagePool||(n._imagePool=[]),r=n._canvasPool||(n._canvasPool=[]),c=n._lineImagePool||(n._lineImagePool=[]),l=n._lineCanvasPool||(n._lineCanvasPool=[]),h=n._grid||[];if((e=e._batchDarwTimers)&&e.length)for(;e.length;)clearTimeout(e.shift());for(a in h)if(o=h[a])for(i in o)(e=o[i])&&e.drawState&&((t=e.image).attr({src:"",width:0,height:0}),s.push(t),delete e.image,t=e.canvas,r.push(t),delete e.canvas,delete e.ctx,t=e.lineImage)&&(t.attr({src:"",width:0,height:0}),c.push(t),delete e.lineImage,t=e.lineCanvas,l.push(t),delete e.lineCanvas,delete e.lineCtx);delete n._grid},_gridDraw:function(t){var e=this,a=e.graphics,i=e.config,o=e.chart.config.viewPortConfig;clearTimeout(i.timer),a.container.line.transform("t"+L(-o.x*o.scaleX)+","+L(-o.y*o.scaleY)),a.container.plot.transform("t"+L(-o.x*o.scaleX)+","+L(-o.y*o.scaleY)),t?e._gridManager():i.timer=setTimeout(function(){e._gridManager()},10)},_gridManager:function(){var t,e,a,i,o,n,s,r,c,l=this,h=l.config,g=l.graphics._grid,d=h._drawGrid||(h._drawGrid=[]),u=(p=l.chart).config,p=p.components;n=(o=u.viewPortConfig).scaleX;var v=o.scaleY;s=Math.ceil(v),i=Math.ceil(n);var f=p.xAxis[0],m=p.yAxis[0],x=(p=f.getAxisConfig("axisDimention").axisLength||u.canvasWidth,u=u.canvasHeight,f.config),y=m.config,b=x.axisRange.min,w=(x=x.axisRange.max,y.axisRange.min),T=(x-b)/n,_=((y=y.axisRange.max)-w)/v;e=h.radius*S(o.scaleX,o.scaleY)+h.plotCosmetics.borderWidth,f=D(e/(p*o.scaleX/(f.max-f.min))),m=D(e/(u*o.scaleY/(m.max-m.min))),t=S(1,(e=p/n)/10,(c=u/v)/10);v={};var F=[];for(n=o.x+t,e=o.x-t+e,r=o.y+t,t=o.y+c-t,(c=v[(o=l._getFocusedGrid(n,r)).row]||(v[o.row]={}))[o.col]=!0,(c=v[(o=l._getFocusedGrid(e,r)).row]||(v[o.row]={}))[o.col]=!0,(c=v[(o=l._getFocusedGrid(e,t)).row]||(v[o.row]={}))[o.col]=!0,(c=v[(o=l._getFocusedGrid(n,t)).row]||(v[o.row]={}))[o.col]=!0,o=(n=l._getFocusedGrid()).row,n=n.col,e=A(o-1,0),o=S(o+1,s-1),s=A(n-1,0),n=S(n+1,i-1),i=y-e*_,r=e;r<=o;r+=1){for(g[r]||(g[r]={}),e=b+s*T,c=s;c<=n;c+=1)(t=g[r][c])||(a=A(i-_,w),t=S(e+T,x),t=g[r][c]={xPixel:c*p,yPixel:r*u,xMinValue:e,yMinValue:a,xMaxValue:t,yMaxValue:i,drawState:0,xMinWPad:A(e-f,b),yMinWPad:A(a-m,w),xMaxWPad:S(t+f,x),yMaxWPad:S(i+m,y)}),t.drawState||(v[r]&&v[r][c]?d.push({row:r,col:c}):F.push({row:r,col:c})),e+=T;i-=_}(d.length||F.length)&&l._drawGridArr(function(){h._drawGrid=F,l._drawGridArr()})},_getFocusedGrid:function(t,e){var a=(o=this.chart.config).viewPortConfig,i=o.canvasWidth/a.scaleX,o=o.canvasHeight/a.scaleY,n=isNaN(t)?a.x+i/2:t;a=isNaN(e)?a.y+o/2:e;return{row:s(a/o),col:s(n/i)}},_drawGridArr:function(t){var e,a,i,o;e=(b=this.chart).config;var n=b.components,s=e.viewPortConfig,r=this.config,c=r.drawLine,l=r._drawGrid,h=[],g=this.graphics.container,d=n.paper,u=(n=n.xAxis[0].getAxisConfig("axisDimention").axisLength||e.canvasWidth,e.canvasHeight),p=this.graphics._grid,v=this.graphics._imagePool||[],f=this.graphics._canvasPool||[],m=this.graphics._lineImagePool||[],x=this.graphics._lineCanvasPool||[],y=r.plotCosmetics,b=(s=r.radius*S(s.scaleX,s.scaleY),(b.components.xAxis[0].getAxisConfig("axisDimention").x||e.canvasLeft)-e.canvasLeft);if(l.length){for(;l.length;)2!==(e=p[(e=l.shift()).row][e.col]).drawState&&(e.drawState=2,c&&(e.lineImage=m.length?m.shift():d.image("",g.line),e.lineImage.attr({x:e.xPixel+b,y:e.yPixel,width:n,height:u}),e.lineCanvas=i=f.length?x.shift():w.document.createElement("canvas"),i.setAttribute("width",n),i.setAttribute("height",u),(o=e.lineCtx=i.getContext("2d")).fillStyle=y.fillStyle,o.strokeStyle=y.lineStrokeStyle,o.lineWidth=y.lineWidth),e.image=v.length?v.shift():d.image("",g.plot),e.image.attr({x:e.xPixel+b,y:e.yPixel,width:n,height:u}),e.canvas=a=f.length?f.shift():w.document.createElement("canvas"),a.setAttribute("width",n),a.setAttribute("height",u),o=e.ctx=a.getContext("2d"),s<1?(o.strokeStyle=y.fillStyle,o.lineWidth=.5):(o.fillStyle=y.fillStyle,o.strokeStyle=y.strokeStyle,o.lineWidth=y.borderWidth),h.push(e));r._batchDrawindex=this.JSONData.data&&this.JSONData.data.length-1||0,this._drawGridArrBatch(h,t,!r.animation.enabled)}else t&&t()},_drawGridArrBatch:function(t,e,a){var i,o,n,s,r,c,l,h,g,d,u,p,v,f,m,x,y=this;c=y.config;var b=y.chart.components,w=(x=y.config).drawLine;h=x.plotCosmetics,s=x._batchDrawindex,n=y.components.data,r=s-x.chunkSize;var T=b.yAxis[0],_=x.zoomedRadius,F=(b=b.xAxis[0].getPVR(),T=T.getPVR(),c.showRegressionLine),C=x._store||[],E=h.lineWidth||_<1;for(F&&(f=c.regLineColor,m=c.regressionLineThickness),h=0;h<t.length;h+=1)t[h].ctx.beginPath(),w&&t[h].lineCtx.beginPath();for(r=r<=0?0:r;r<=s;--s)if((u=n[s]&&n[s].config.setValue)&&!isNaN(u.x)&&!isNaN(u.y))for(h=0;h<t.length;h+=1)p=(i=t[h]).xMinValue,v=i.yMaxValue,u.x<i.xMinWPad||u.x>i.xMaxWPad||u.y<i.yMinWPad||u.y>i.yMaxWPad||(g=i.ctx,d=i.lineCtx,i=L((u.x-p)*b),o=L((v-u.y)*T),(l=C[i])||(l=C[i]={}),l[o])||(l[o]=!0,w&&(l=0<=s-1&&n[s-1].config.setValue)&&(d.moveTo(L((l.x-p)*b),L((v-l.y)*T)),d.lineTo(i,o)),_<1?(g.moveTo(i,o),g.lineTo(i+1,o)):(g.moveTo(i+_,o),g.arc(i,o,_,0,V)));for(h=0;h<t.length;h+=1)(g=(i=t[h]).ctx).fill(),E&&g.stroke(),g.closePath(),w&&((d=i.lineCtx).fill(),E&&d.stroke(),d.closePath());if(0<=(x._batchDrawindex=s)){if(!a)for(h=0;h<t.length;h+=1)g=t[h].image,n=t[h].canvas,g.attr({src:n.toDataURL("image/png")}),x.drawLine&&(f=t[h].lineImage,m=t[h].lineCanvas,f.attr({src:m.toDataURL("image/png")}));(x._batchDarwTimers||(x._batchDarwTimers=[])).push(setTimeout(function(){y.chart&&y._drawGridArrBatch(t,e,a)},0))}else{if(delete x._store,F)for(x=c.regressionData,h=0;h<t.length;h+=1)s=(i=t[h]).xMinValue,c=i.yMaxValue,g=i.image,n=i.canvas,g=i.ctx,n=(x[0].x-s)*b,r=(c-x[0].y)*T,s=(x[1].x-s)*b,c=(c-x[1].y)*T,g.beginPath(),g.strokeStyle=f,g.lineWidth=m,g.moveTo(n,r),g.lineTo(s,c),g.stroke(),g.closePath();for(h=0;h<t.length;h+=1)g=(i=t[h]).image,n=i.canvas,i.drawState=1,g.attr({src:n.toDataURL("image/png")}),w&&(f=i.lineImage,m=i.lineCanvas,f.attr({src:m.toDataURL("image/png")}));y.tree||setTimeout(function(){y._buildKdTree()},250),e&&e()}},_buildKdTree:function(){var t=this.config;t._kdPoints=(this.JSONData.data||[]).slice(),this.components.kDTree||(this.components.kDTree=new W),this.components.kDTree.buildKdTree(t._kdPoints),delete t._kdPoints},getElement:function(t){if(this.components.kDTree)return this.components.kDTree.getNeighbour(t)},show:function(){var t=(t=this.graphics)&&t.container;this.visible=!0,this._conatinerHidden=!1,t.line.show(),t.plot.show()},hide:function(){var t=(t=this.graphics)&&t.container;this.visible=!1,this._conatinerHidden=!0,t.line.hide(),t.plot.hide()},_addLegend:function(){var t=this.chart,e=t.jsonData.chart,a=this.config,i=this.JSONData,o=t.getFillColor,n=X(i.anchorbordercolor,e.anchorbordercolor),s=d(X(n,a.plotBorderColor)),r=(n=Y(i.anchorborderthickness,e.anchorborderthickness,n?1:0),d(X(i.anchorbgcolor,i.color,e.anchorbgcolor,a.plotColor))),c=X(i.anchoralpha,i.alpha,e.anchoralpha,B);e=X(i.anchorbgalpha,i.alpha,e.anchorbgalpha,B),i={color:a.lineColor,alpha:a.lineAlpha},o=a.plotCosmetics={fillStyle:o(r,c*e/100),strokeStyle:o(s,c),borderWidth:n,lineWidth:a.lineThickness,lineStrokeStyle:h(i)};this.legendItemId=t.components.legend.addItems(this,this.legendInteractivity,{enabled:a.includeInLegend,type:this.type,fillColor:o.fillStyle,strokeColor:o.strokeStyle,anchorSide:2,strokeWidth:a.anchorBorderThickness,label:l(this.JSONData.seriesname)})},_setConfigure:function(){var t,e,a,i,o,n,s,r,c,l=-1/0,h=1/0,g=1/0,d=-1/0,u=this.components.data||(this.components.data=[]);t=this.chart;var p=k.parseUnsafeString,v=this.config,f=this.JSONData,m=t.jsonData.chart,x=f.data||[],y=x.length,b=t.components.numberFormatter,w=p(m.yaxisname),T=p(m.xaxisname),_=v.lineDashed,F=v.lineDashStyle,C=v.parentYAxis,E=v.toolTipSepChar,L=v.seriesname;for(t=0;t<y;t+=1)i=x[t],(e=(a=u[t]||(u[t]={})).config||(a.config={})).setValue=o={x:b.getCleanValue(i.x),y:b.getCleanValue(i.y),index:t},d=A(d,o.x),g=S(g,o.x),l=A(l,o.y),h=S(h,o.y),v.showRegressionLine&&this.pointValueWatcher(o.x,o.y,v.regressionObj),e.setLink=X(i.link),e.anchorProps=this._parseAnchorProperties(t),e.showValue=Y(i.showvalue,v.showValues),e.dashed=Y(i.dashed,_),e.color=X(i.color,v.lineColor),e.alpha=X(i.alpha,v.lineAlpha),e.dashStyle=e.dashed?F:"none",e.toolTipValue=n=b.dataLabels(o.y,C),e.setDisplayValue=c=p(i.displayvalue),r=e.formatedVal=X(i.toolTipValue,b.dataLabels(o.y,C)),s=b.xAxis(o.x),e.displayValue=X(c,n),e.setTooltext=k.getValidValue(p(X(i.tooltext,v.plotToolText))),v.showTooltip?void 0!==e.setTooltext?(o=[4,5,6,7,8,9,10,11],s={yaxisName:w,xaxisName:T,yDataValue:r,xDataValue:s},i=P(e.setTooltext,o,s,i,m,f)):null===r?i=!1:(i=L?L+E:M,i+=o.x?s+E:M,i+=n):i=!1,e.toolText=i,a?a.graphics||(u[t].graphics={}):a=u[t]={graphics:{}},e.hoverEffects=this._parseHoverEffectOptions(a),e.anchorProps.isAnchorHoverRadius=e.hoverEffects.anchorRadius;v.xMax=d,v.xMin=g,v.yMin=h,v.yMax=l,v.showRegressionLine&&(v.regressionData=this.getRegressionLineSeries(v.regressionObj,v.showYOnX,y)),this.ErrorValueConfigure&&this.ErrorValueConfigure()}},"Scatter"]),u.addSymbol({zoomInIcon:function(t,e,a){t-=.2*a,e-=.2*a;var i=.8*a,o=u.rad(43),n=u.rad(48),s=t+i*p(o),r=(o=e+i*v(o),t+i*p(n)),c=(n=e+i*v(n),u.rad(45));return["M",s,o,"A",i,i,0,1,0,r,n,"Z","M",s+1,o+1,"L",s+a*p(c),o+a*v(c),r+a*p(c)-1,a=n+a*v(c)-1,r+1,n+1,"Z","M",t-2,e,"L",t+2,e,"Z","M",t,e-2,"L",t,e+2,"Z"]},zoomModeIcon:function(t,e,a){var i=[];t-=.2*a,e-=.2*a;var o=.8*a,n=u.rad(43),s=u.rad(48),r=t+o*p(n),c=(n=e+o*v(n),t+o*p(s)),l=(s=e+o*v(s),u.rad(45)),h=r+a*p(l),g=n+a*v(l),d=c+a*p(l)-1;return a=s+a*v(l)-1,i.concat(["M",r,n,"A",o,o,0,1,0,c,s,"Z","M",r+1,n+1,"L",h,g,d,a,d+1,a-1,d+1.5,a+1.5,d-1,a+1,d,a,c+1,s+1,"Z","M",t-2,e,"L",t+2,e,"Z","M",t,e-2,"L",t,e+2,"Z"])},panModeIcon:function(t,e,a){var i=t-11.25;return[].concat(["M",(i=t)-(a*=2.5)/16,e-a/8,"L",i+a/16,e-a/8,"L",i+a/16,e-a/3.2,"L",i+6*a/32,e-10*a/32,"L",i,e-a/2,"L",i-6*a/32,e-10*a/32,"L",i-a/16,e-a/3.2,"Z","M",i+4*a/32,e-2*a/32,"L",i+10*a/32,e-2*a/32,"L",i+10*a/32,e-6*a/32,"L",i+16*a/32,e,"L",i+10*a/32,e+6*a/32,"L",i+10*a/32,e+2*a/32,"L",i+4*a/32,e+2*a/32,"Z","M",i+2*a/32,e+5*a/32,"L",i+2*a/32,e+10*a/32,"L",i+6*a/32,e+10*a/32,"L",i,e+16*a/32,"L",i-6*a/32,e+10*a/32,"L",i-2*a/32,e+10*a/32,"L",i-2*a/32,e+5*a/32,"Z","M",i-4*a/32,e-2*a/32,"L",i-10*a/32,e-2*a/32,"L",i-10*a/32,e-6*a/32,"L",i-16*a/32,e,"L",i-10*a/32,e+6*a/32,"L",i-10*a/32,e+2*a/32,"L",i-4*a/32,e+2*a/32,"Z"])}})}])});